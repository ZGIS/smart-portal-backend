<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title id="title">
          controllers/SosDataController.scala.html
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/css/theme.default.min.css" type="text/css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/js/jquery.tablesorter.min.js"></script><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css"/><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script><script type="text/javascript">
        $(document).ready(function() {$(".tablesorter").tablesorter();});
      </script>
        <style>
          table.codegrid { font-family: monospace; font-size: 12px; width: auto!important; }table.statementlist { width: auto!important; font-size: 13px; } table.codegrid td { padding: 0!important; border: 0!important } table td.linenumber { width: 40px!important; } 
        </style>
      </head>
      <body style="font-family: monospace;">
        <ul class="nav nav-tabs">
          <li>
            <a href="#codegrid" data-toggle="tab">Codegrid</a>
          </li>
          <li>
            <a href="#statementlist" data-toggle="tab">Statement List</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="codegrid">
            <pre style='font-size: 12pt; font-family: courier;'>1 <span style=''>/*
</span>2 <span style=''> * Copyright (c) 2011-2017 Interfaculty Department of Geoinformatics, University of
</span>3 <span style=''> * Salzburg (Z_GIS) &amp; Institute of Geological and Nuclear Sciences Limited (GNS Science)
</span>4 <span style=''> * in the SMART Aquifer Characterisation (SAC) programme funded by the New Zealand
</span>5 <span style=''> * Ministry of Business, Innovation and Employment (MBIE)
</span>6 <span style=''> *
</span>7 <span style=''> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
</span>8 <span style=''> * you may not use this file except in compliance with the License.
</span>9 <span style=''> * You may obtain a copy of the License at
</span>10 <span style=''> *
</span>11 <span style=''> *    http://www.apache.org/licenses/LICENSE-2.0
</span>12 <span style=''> *
</span>13 <span style=''> * Unless required by applicable law or agreed to in writing, software
</span>14 <span style=''> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
</span>15 <span style=''> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
</span>16 <span style=''> * See the License for the specific language governing permissions and
</span>17 <span style=''> * limitations under the License.
</span>18 <span style=''> */
</span>19 <span style=''>
</span>20 <span style=''>package controllers
</span>21 <span style=''>
</span>22 <span style=''>import java.net.URLEncoder
</span>23 <span style=''>import java.time.{OffsetDateTime, ZoneId}
</span>24 <span style=''>import java.time.format.DateTimeFormatter
</span>25 <span style=''>import javax.inject.Inject
</span>26 <span style=''>
</span>27 <span style=''>import models.ErrorResult
</span>28 <span style=''>import models.sosdata.{SosCapabilities, Timeseries, TimeseriesData, Wml2Export}
</span>29 <span style=''>import models.tvp.XmlTvpParser
</span>30 <span style=''>import play.api.Configuration
</span>31 <span style=''>import play.api.libs.json.{JsError, JsValue, Json}
</span>32 <span style=''>import play.api.libs.ws.{WSClient, WSResponse}
</span>33 <span style=''>import play.api.mvc.{Action, AnyContent, Controller}
</span>34 <span style=''>import utils.ClassnameLogger
</span>35 <span style=''>
</span>36 <span style=''>import scala.concurrent.ExecutionContext.Implicits.global
</span>37 <span style=''>import scala.concurrent.Future
</span>38 <span style=''>import scala.io.Source
</span>39 <span style=''>import scala.util.Try
</span>40 <span style=''>
</span>41 <span style=''>/**
</span>42 <span style=''>  * Controller to access SOS server and return parsed time series to frontend.
</span>43 <span style=''>  */
</span>44 <span style=''>class SosDataController @Inject()(config: Configuration, wsClient: WSClient)
</span>45 <span style=''>  extends Controller with ClassnameLogger {
</span>46 <span style=''>
</span>47 <span style=''>  val configuration: play.api.Configuration = </span><span style='background: #AEF1AE'>config</span><span style=''>
</span>48 <span style=''>  private lazy val appTimeZone: String = </span><span style='background: #F0ADAD'>configuration.getString(&quot;datetime.timezone&quot;).getOrElse(&quot;Pacific/Auckland&quot;)</span><span style=''>
</span>49 <span style=''>  private lazy val wml2Exporter = </span><span style='background: #F0ADAD'>new Wml2Export(appTimeZone)</span><span style=''>
</span>50 <span style=''>  lazy val formatter = </span><span style='background: #F0ADAD'>DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)</span><span style=''>
</span>51 <span style=''>
</span>52 <span style=''>  val GET_CAPABILITIES_XML =
</span>53 <span style=''>    </span><span style='background: #AEF1AE'>&quot;&quot;&quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</span>54 <span style=''></span><span style='background: #AEF1AE'>      |&lt;sos:GetCapabilities
</span>55 <span style=''></span><span style='background: #AEF1AE'>      |    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span>56 <span style=''></span><span style='background: #AEF1AE'>      |    xmlns:sos=&quot;http://www.opengis.net/sos/2.0&quot;
</span>57 <span style=''></span><span style='background: #AEF1AE'>      |    xmlns:ows=&quot;http://www.opengis.net/ows/1.1&quot;
</span>58 <span style=''></span><span style='background: #AEF1AE'>      |    xmlns:swe=&quot;http://www.opengis.net/swe/2.0&quot; service=&quot;SOS&quot; xsi:schemaLocation=&quot;http://www.opengis.net/sos/2.0 http://schemas.opengis.net/sos/2.0/sosGetCapabilities.xsd&quot;&gt;
</span>59 <span style=''></span><span style='background: #AEF1AE'>      |    &lt;ows:AcceptVersions&gt;
</span>60 <span style=''></span><span style='background: #AEF1AE'>      |        &lt;ows:Version&gt;2.0.0&lt;/ows:Version&gt;
</span>61 <span style=''></span><span style='background: #AEF1AE'>      |    &lt;/ows:AcceptVersions&gt;
</span>62 <span style=''></span><span style='background: #AEF1AE'>      |    &lt;ows:Sections&gt;
</span>63 <span style=''></span><span style='background: #AEF1AE'>      |        &lt;ows:Section&gt;OperationsMetadata&lt;/ows:Section&gt;
</span>64 <span style=''></span><span style='background: #AEF1AE'>      |        &lt;ows:Section&gt;ServiceIdentification&lt;/ows:Section&gt;
</span>65 <span style=''></span><span style='background: #AEF1AE'>      |        &lt;ows:Section&gt;ServiceProvider&lt;/ows:Section&gt;
</span>66 <span style=''></span><span style='background: #AEF1AE'>      |        &lt;ows:Section&gt;FilterCapabilities&lt;/ows:Section&gt;
</span>67 <span style=''></span><span style='background: #AEF1AE'>      |        &lt;ows:Section&gt;Contents&lt;/ows:Section&gt;
</span>68 <span style=''></span><span style='background: #AEF1AE'>      |    &lt;/ows:Sections&gt;
</span>69 <span style=''></span><span style='background: #AEF1AE'>      |&lt;/sos:GetCapabilities&gt;
</span>70 <span style=''></span><span style='background: #AEF1AE'>    &quot;&quot;&quot;.stripMargin</span><span style=''>
</span>71 <span style=''>
</span>72 <span style=''>
</span>73 <span style=''>  /**
</span>74 <span style=''>    * Loads a time series from a SOS server. A Timeseries &quot;configuration&quot; has to be passd within the POST
</span>75 <span style=''>    * request.
</span>76 <span style=''>    *
</span>77 <span style=''>    * @return
</span>78 <span style=''>    */
</span>79 <span style=''>  def getTimeseries: Action[JsValue] = </span><span style='background: #F0ADAD'>Action.async(parse.json) { request =&gt;
</span>80 <span style=''></span><span style='background: #F0ADAD'>    request.body.validate[Timeseries].fold(
</span>81 <span style=''></span><span style='background: #F0ADAD'>      errors =&gt; {
</span>82 <span style=''></span><span style='background: #F0ADAD'>        logger.error(JsError.toJson(errors).toString())
</span>83 <span style=''></span><span style='background: #F0ADAD'>        val error = ErrorResult(&quot;Error while validating request.&quot;, Some(JsError.toJson(errors).toString))
</span>84 <span style=''></span><span style='background: #F0ADAD'>        Future {
</span>85 <span style=''></span><span style='background: #F0ADAD'>          BadRequest(Json.toJson(error)).as(JSON)
</span>86 <span style=''></span><span style='background: #F0ADAD'>        }
</span>87 <span style=''></span><span style='background: #F0ADAD'>      },
</span>88 <span style=''></span><span style='background: #F0ADAD'>
</span>89 <span style=''></span><span style='background: #F0ADAD'>      timeseries =&gt; {
</span>90 <span style=''></span><span style='background: #F0ADAD'>        val sosXmlRequest = getObservationRequestXml(timeseries)
</span>91 <span style=''></span><span style='background: #F0ADAD'>        val responseFuture = wsClient.url(timeseries.sosUrl)
</span>92 <span style=''></span><span style='background: #F0ADAD'>          .withHeaders(CONTENT_TYPE -&gt; &quot;application/xml&quot;)
</span>93 <span style=''></span><span style='background: #F0ADAD'>          .post(sosXmlRequest)
</span>94 <span style=''></span><span style='background: #F0ADAD'>
</span>95 <span style=''></span><span style='background: #F0ADAD'>        responseFuture.recover {
</span>96 <span style=''></span><span style='background: #F0ADAD'>          case e: Exception =&gt;
</span>97 <span style=''></span><span style='background: #F0ADAD'>            logger.error(&quot;Sos GetObservation threw exception&quot;, e)
</span>98 <span style=''></span><span style='background: #F0ADAD'>            val error = ErrorResult(s&quot;Exception (${e.getClass.getCanonicalName}) on SOS get capabilities.&quot;,
</span>99 <span style=''></span><span style='background: #F0ADAD'>              Some(e.getMessage))
</span>100 <span style=''></span><span style='background: #F0ADAD'>            InternalServerError(Json.toJson(error)).as(JSON)
</span>101 <span style=''></span><span style='background: #F0ADAD'>        }
</span>102 <span style=''></span><span style='background: #F0ADAD'>
</span>103 <span style=''></span><span style='background: #F0ADAD'>        responseFuture.map(response =&gt; {
</span>104 <span style=''></span><span style='background: #F0ADAD'>          if (response.status != 200) {
</span>105 <span style=''></span><span style='background: #F0ADAD'>            logger.error(s&quot;Calling SOS ${timeseries.sosUrl} HTTP result status ${response.status} on GetObservation&quot;)
</span>106 <span style=''></span><span style='background: #F0ADAD'>            val error = ErrorResult(s&quot;Server ${timeseries.sosUrl} responded with ${response.status} on GetObservation&quot;,
</span>107 <span style=''></span><span style='background: #F0ADAD'>              Some(response.body))
</span>108 <span style=''></span><span style='background: #F0ADAD'>            InternalServerError(Json.toJson(error)).as(JSON)
</span>109 <span style=''></span><span style='background: #F0ADAD'>          }
</span>110 <span style=''></span><span style='background: #F0ADAD'>          else if (!response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;)) {
</span>111 <span style=''></span><span style='background: #F0ADAD'>            logger.error(s&quot;SOS GetObservation result was not XML but ${response.header(&quot;Content-Type&quot;).get}&quot;)
</span>112 <span style=''></span><span style='background: #F0ADAD'>            val error = ErrorResult(
</span>113 <span style=''></span><span style='background: #F0ADAD'>              s&quot;SOS GetObservation result was not XML but ${response.header(&quot;Content-Type&quot;).get}&quot;,
</span>114 <span style=''></span><span style='background: #F0ADAD'>              Some(response.body))
</span>115 <span style=''></span><span style='background: #F0ADAD'>            InternalServerError(Json.toJson(error)).as(JSON)
</span>116 <span style=''></span><span style='background: #F0ADAD'>          }
</span>117 <span style=''></span><span style='background: #F0ADAD'>          else if (timeseries.responseFormat.isDefined &amp;&amp; !timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/om/2.0&quot;)) {
</span>118 <span style=''></span><span style='background: #F0ADAD'>            logger.error(s&quot;SOS GetObservation responseFormat unsupported for this request; ${timeseries.responseFormat.getOrElse(&quot;none&quot;)}&quot;)
</span>119 <span style=''></span><span style='background: #F0ADAD'>            val error = ErrorResult(
</span>120 <span style=''></span><span style='background: #F0ADAD'>              s&quot;SOS GetObservation responseFormat unsupported for this request; ${timeseries.responseFormat.getOrElse(&quot;none&quot;)}&quot;,
</span>121 <span style=''></span><span style='background: #F0ADAD'>              Some(response.body))
</span>122 <span style=''></span><span style='background: #F0ADAD'>            InternalServerError(Json.toJson(error)).as(JSON)
</span>123 <span style=''></span><span style='background: #F0ADAD'>          }
</span>124 <span style=''></span><span style='background: #F0ADAD'>          else {
</span>125 <span style=''></span><span style='background: #F0ADAD'>            val tvp = new XmlTvpParser().parseOm2Measurements(Source.fromString(response.body))
</span>126 <span style=''></span><span style='background: #F0ADAD'>            val tsdata =
</span>127 <span style=''></span><span style='background: #F0ADAD'>              if (tvp.isEmpty) {
</span>128 <span style=''></span><span style='background: #F0ADAD'>                TimeseriesData(
</span>129 <span style=''></span><span style='background: #F0ADAD'>                  x = Seq.empty[String],
</span>130 <span style=''></span><span style='background: #F0ADAD'>                  y = Seq.empty[String],
</span>131 <span style=''></span><span style='background: #F0ADAD'>                  name = timeseries.timeseriesName
</span>132 <span style=''></span><span style='background: #F0ADAD'>                )
</span>133 <span style=''></span><span style='background: #F0ADAD'>              }
</span>134 <span style=''></span><span style='background: #F0ADAD'>              else {
</span>135 <span style=''></span><span style='background: #F0ADAD'>                TimeseriesData(
</span>136 <span style=''></span><span style='background: #F0ADAD'>                  x = tvp.map(_.datetime),
</span>137 <span style=''></span><span style='background: #F0ADAD'>                  y = tvp.map(_.measValue),
</span>138 <span style=''></span><span style='background: #F0ADAD'>                  name = timeseries.timeseriesName
</span>139 <span style=''></span><span style='background: #F0ADAD'>                )
</span>140 <span style=''></span><span style='background: #F0ADAD'>              }
</span>141 <span style=''></span><span style='background: #F0ADAD'>            val uom = if (tvp.isEmpty) {
</span>142 <span style=''></span><span style='background: #F0ADAD'>                if (timeseries.uom.isEmpty) {
</span>143 <span style=''></span><span style='background: #F0ADAD'>                  timeseries.observedProperty
</span>144 <span style=''></span><span style='background: #F0ADAD'>                } else {
</span>145 <span style=''></span><span style='background: #F0ADAD'>                  timeseries.uom.getOrElse(&quot;empty&quot;)
</span>146 <span style=''></span><span style='background: #F0ADAD'>                }
</span>147 <span style=''></span><span style='background: #F0ADAD'>              } else tvp.head.measUnit
</span>148 <span style=''></span><span style='background: #F0ADAD'>            val result = timeseries.copy(data = Some(tsdata), uom = Some(uom))
</span>149 <span style=''></span><span style='background: #F0ADAD'>            Ok(result.toJson()).as(JSON)
</span>150 <span style=''></span><span style='background: #F0ADAD'>          }
</span>151 <span style=''></span><span style='background: #F0ADAD'>        })
</span>152 <span style=''></span><span style='background: #F0ADAD'>      }
</span>153 <span style=''></span><span style='background: #F0ADAD'>    )
</span>154 <span style=''></span><span style='background: #F0ADAD'>  }</span><span style=''>
</span>155 <span style=''>
</span>156 <span style=''>  /**
</span>157 <span style=''>    * Loads a time series from a SOS server. A Timeseries &quot;configuration&quot; has to be passd within the POST
</span>158 <span style=''>    * request.
</span>159 <span style=''>    *
</span>160 <span style=''>    * @return
</span>161 <span style=''>    */
</span>162 <span style=''>  def exportTimeseries = </span><span style='background: #F0ADAD'>Action.async(parse.json) { request =&gt;
</span>163 <span style=''></span><span style='background: #F0ADAD'>    request.body.validate[Timeseries].fold(
</span>164 <span style=''></span><span style='background: #F0ADAD'>      errors =&gt; {
</span>165 <span style=''></span><span style='background: #F0ADAD'>        logger.error(JsError.toJson(errors).toString())
</span>166 <span style=''></span><span style='background: #F0ADAD'>        val error = ErrorResult(&quot;Error while validating request.&quot;, Some(JsError.toJson(errors).toString))
</span>167 <span style=''></span><span style='background: #F0ADAD'>        Future {
</span>168 <span style=''></span><span style='background: #F0ADAD'>          BadRequest(Json.toJson(error)).as(JSON)
</span>169 <span style=''></span><span style='background: #F0ADAD'>        }
</span>170 <span style=''></span><span style='background: #F0ADAD'>      },
</span>171 <span style=''></span><span style='background: #F0ADAD'>
</span>172 <span style=''></span><span style='background: #F0ADAD'>      timeseries =&gt; {
</span>173 <span style=''></span><span style='background: #F0ADAD'>
</span>174 <span style=''></span><span style='background: #F0ADAD'>        if (timeseries.responseFormat.isDefined &amp;&amp; !timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/waterml/2.0&quot;)) {
</span>175 <span style=''></span><span style='background: #F0ADAD'>          logger.error(s&quot;SOS GetObservation responseFormat unsupported for this request; ${timeseries.responseFormat.getOrElse(&quot;none&quot;)}&quot;)
</span>176 <span style=''></span><span style='background: #F0ADAD'>          val error = ErrorResult(
</span>177 <span style=''></span><span style='background: #F0ADAD'>            s&quot;SOS GetObservation responseFormat unsupported for this request; ${timeseries.responseFormat.getOrElse(&quot;&quot;)}&quot;, None)
</span>178 <span style=''></span><span style='background: #F0ADAD'>          InternalServerError(Json.toJson(error)).as(JSON)
</span>179 <span style=''></span><span style='background: #F0ADAD'>        }
</span>180 <span style=''></span><span style='background: #F0ADAD'>
</span>181 <span style=''></span><span style='background: #F0ADAD'>        val capabilitiesFuture = retrieveSosCapabilities(timeseries.sosUrl)
</span>182 <span style=''></span><span style='background: #F0ADAD'>
</span>183 <span style=''></span><span style='background: #F0ADAD'>        // still normal future recover
</span>184 <span style=''></span><span style='background: #F0ADAD'>        capabilitiesFuture.recover {
</span>185 <span style=''></span><span style='background: #F0ADAD'>          case e: Exception =&gt;
</span>186 <span style=''></span><span style='background: #F0ADAD'>            logger.error(&quot;Sos get capabilities threw exception&quot;, e)
</span>187 <span style=''></span><span style='background: #F0ADAD'>            val error = ErrorResult(s&quot;Exception (${e.getClass.getCanonicalName}) on SOS get capabilities.&quot;,
</span>188 <span style=''></span><span style='background: #F0ADAD'>              Some(e.getMessage))
</span>189 <span style=''></span><span style='background: #F0ADAD'>            InternalServerError(Json.toJson(error)).as(JSON)
</span>190 <span style=''></span><span style='background: #F0ADAD'>        }
</span>191 <span style=''></span><span style='background: #F0ADAD'>
</span>192 <span style=''></span><span style='background: #F0ADAD'>        val sosXmlRequest = getObservationRequestXml(timeseries, &quot;http://www.opengis.net/waterml/2.0&quot;)
</span>193 <span style=''></span><span style='background: #F0ADAD'>        val responseFuture = wsClient.url(timeseries.sosUrl)
</span>194 <span style=''></span><span style='background: #F0ADAD'>          .withHeaders(CONTENT_TYPE -&gt; &quot;application/xml&quot;)
</span>195 <span style=''></span><span style='background: #F0ADAD'>          .post(sosXmlRequest)
</span>196 <span style=''></span><span style='background: #F0ADAD'>
</span>197 <span style=''></span><span style='background: #F0ADAD'>        responseFuture.recover {
</span>198 <span style=''></span><span style='background: #F0ADAD'>          case e: Exception =&gt;
</span>199 <span style=''></span><span style='background: #F0ADAD'>            logger.error(&quot;Sos GetObservation threw exception&quot;, e)
</span>200 <span style=''></span><span style='background: #F0ADAD'>            val error = ErrorResult(s&quot;Exception (${e.getClass.getCanonicalName}) on SOS get capabilities.&quot;,
</span>201 <span style=''></span><span style='background: #F0ADAD'>              Some(e.getMessage))
</span>202 <span style=''></span><span style='background: #F0ADAD'>            InternalServerError(Json.toJson(error)).as(JSON)
</span>203 <span style=''></span><span style='background: #F0ADAD'>        }
</span>204 <span style=''></span><span style='background: #F0ADAD'>
</span>205 <span style=''></span><span style='background: #F0ADAD'>        val combinedFuture: Future[(Either[ErrorResult, SosCapabilities], WSResponse)] = for {
</span>206 <span style=''></span><span style='background: #F0ADAD'>          capaResult &lt;- capabilitiesFuture
</span>207 <span style=''></span><span style='background: #F0ADAD'>          sosDataResult &lt;- responseFuture
</span>208 <span style=''></span><span style='background: #F0ADAD'>        } yield (capaResult, sosDataResult)
</span>209 <span style=''></span><span style='background: #F0ADAD'>
</span>210 <span style=''></span><span style='background: #F0ADAD'>        combinedFuture.map(combinedResponse =&gt; {
</span>211 <span style=''></span><span style='background: #F0ADAD'>
</span>212 <span style=''></span><span style='background: #F0ADAD'>          val response = combinedResponse._2
</span>213 <span style=''></span><span style='background: #F0ADAD'>
</span>214 <span style=''></span><span style='background: #F0ADAD'>          if (response.status != 200) {
</span>215 <span style=''></span><span style='background: #F0ADAD'>            logger.error(s&quot;Calling SOS ${timeseries.sosUrl} HTTP result status ${response.status} on GetObservation&quot;)
</span>216 <span style=''></span><span style='background: #F0ADAD'>            val error = ErrorResult(s&quot;Server ${timeseries.sosUrl} responded with ${response.status} on GetObservation&quot;,
</span>217 <span style=''></span><span style='background: #F0ADAD'>              Some(response.body))
</span>218 <span style=''></span><span style='background: #F0ADAD'>            InternalServerError(Json.toJson(error)).as(JSON)
</span>219 <span style=''></span><span style='background: #F0ADAD'>          }
</span>220 <span style=''></span><span style='background: #F0ADAD'>          else if (!response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;)) {
</span>221 <span style=''></span><span style='background: #F0ADAD'>            logger.error(s&quot;SOS GetObservation result was not XML but ${response.header(&quot;Content-Type&quot;).get}&quot;)
</span>222 <span style=''></span><span style='background: #F0ADAD'>            val error = ErrorResult(
</span>223 <span style=''></span><span style='background: #F0ADAD'>              s&quot;SOS GetObservation result was not XML but ${response.header(&quot;Content-Type&quot;).get}&quot;,
</span>224 <span style=''></span><span style='background: #F0ADAD'>              Some(response.body))
</span>225 <span style=''></span><span style='background: #F0ADAD'>            InternalServerError(Json.toJson(error)).as(JSON)
</span>226 <span style=''></span><span style='background: #F0ADAD'>          }
</span>227 <span style=''></span><span style='background: #F0ADAD'>          else {
</span>228 <span style=''></span><span style='background: #F0ADAD'>            // Either future folding begins
</span>229 <span style=''></span><span style='background: #F0ADAD'>            combinedResponse._1 match {
</span>230 <span style=''></span><span style='background: #F0ADAD'>              case Right(sosCapabilities) =&gt;
</span>231 <span style=''></span><span style='background: #F0ADAD'>                logger.debug(s&quot;sosCapabilities ${sosCapabilities.responseFormats}&quot;)
</span>232 <span style=''></span><span style='background: #F0ADAD'>                if (sosCapabilities.responseFormats.isDefined &amp;&amp; !sosCapabilities.responseFormats.get.contains(&quot;http://www.opengis.net/waterml/2.0&quot;)) {
</span>233 <span style=''></span><span style='background: #F0ADAD'>                  logger.error(s&quot;SOS Server does not support responseFormat for this request; ${timeseries.responseFormat.getOrElse(&quot;none&quot;)}&quot;)
</span>234 <span style=''></span><span style='background: #F0ADAD'>                  val error = ErrorResult(
</span>235 <span style=''></span><span style='background: #F0ADAD'>                    s&quot;SOS Server does not support responseFormat for this request; ${timeseries.responseFormat.getOrElse(&quot;none&quot;)}&quot;, None)
</span>236 <span style=''></span><span style='background: #F0ADAD'>                  InternalServerError(Json.toJson(error)).as(JSON)
</span>237 <span style=''></span><span style='background: #F0ADAD'>                }
</span>238 <span style=''></span><span style='background: #F0ADAD'>                val wml2 = wml2Exporter.getWml2ExportFromSosGetObs(response.body, sosCapabilities, sosXmlRequest)
</span>239 <span style=''></span><span style='background: #F0ADAD'>                if (wml2.isEmpty) {
</span>240 <span style=''></span><span style='background: #F0ADAD'>                  logger.error(&quot;Couldn't extract WML2 from this SOS GetObservation response&quot;)
</span>241 <span style=''></span><span style='background: #F0ADAD'>                  val error = ErrorResult(
</span>242 <span style=''></span><span style='background: #F0ADAD'>                    &quot;Couldn't extract WML2 from this SOS GetObservation response&quot;,
</span>243 <span style=''></span><span style='background: #F0ADAD'>                    Some(response.body))
</span>244 <span style=''></span><span style='background: #F0ADAD'>                  InternalServerError(Json.toJson(error)).as(JSON)
</span>245 <span style=''></span><span style='background: #F0ADAD'>                } else {
</span>246 <span style=''></span><span style='background: #F0ADAD'>                  val updatedTime = OffsetDateTime.now(ZoneId.of(appTimeZone))
</span>247 <span style=''></span><span style='background: #F0ADAD'>                  val fileName = &quot;export-&quot; + Try (URLEncoder.encode(sosCapabilities.title.replace(&quot; &quot;, &quot;_&quot;), &quot;UTF-8&quot;) + &quot;-&quot; + updatedTime.format(formatter) ).getOrElse(&quot;-sosdata&quot;) + &quot;.wml&quot;
</span>248 <span style=''></span><span style='background: #F0ADAD'>
</span>249 <span style=''></span><span style='background: #F0ADAD'>                  Ok(wml2.get)
</span>250 <span style=''></span><span style='background: #F0ADAD'>                    .withHeaders(&quot;Content-disposition&quot; -&gt; s&quot;attachment; filename=$fileName&quot;)
</span>251 <span style=''></span><span style='background: #F0ADAD'>                    .withHeaders(&quot;Access-Control-Expose-Headers&quot; -&gt; &quot;Content-disposition&quot;)
</span>252 <span style=''></span><span style='background: #F0ADAD'>                    .withHeaders(&quot;Access-Control-Expose-Headers&quot; -&gt; &quot;x-filename&quot;)
</span>253 <span style=''></span><span style='background: #F0ADAD'>                    .withHeaders(&quot;x-filename&quot; -&gt; fileName)
</span>254 <span style=''></span><span style='background: #F0ADAD'>                }
</span>255 <span style=''></span><span style='background: #F0ADAD'>              case Left(errorResult)  =&gt; InternalServerError(Json.toJson(errorResult)).as(JSON)
</span>256 <span style=''></span><span style='background: #F0ADAD'>            }
</span>257 <span style=''></span><span style='background: #F0ADAD'>          }
</span>258 <span style=''></span><span style='background: #F0ADAD'>        })
</span>259 <span style=''></span><span style='background: #F0ADAD'>      }
</span>260 <span style=''></span><span style='background: #F0ADAD'>    )
</span>261 <span style=''></span><span style='background: #F0ADAD'>  }</span><span style=''>
</span>262 <span style=''>
</span>263 <span style=''>  /**
</span>264 <span style=''>    * Create GetObservation Request XML String.
</span>265 <span style=''>    *
</span>266 <span style=''>    * @param timeseries
</span>267 <span style=''>    * @return
</span>268 <span style=''>    */
</span>269 <span style=''>  private def getObservationRequestXml(timeseries: Timeseries, responseFormat: String = &quot;http://www.opengis.net/om/2.0&quot;) = {
</span>270 <span style=''>    </span><span style='background: #F0ADAD'>s&quot;&quot;&quot;
</span>271 <span style=''></span><span style='background: #F0ADAD'>       |&lt;sos:GetObservation
</span>272 <span style=''></span><span style='background: #F0ADAD'>       |    xmlns:sos=&quot;http://www.opengis.net/sos/2.0&quot;
</span>273 <span style=''></span><span style='background: #F0ADAD'>       |    xmlns:fes=&quot;http://www.opengis.net/fes/2.0&quot;
</span>274 <span style=''></span><span style='background: #F0ADAD'>       |    xmlns:gml=&quot;http://www.opengis.net/gml/3.2&quot;
</span>275 <span style=''></span><span style='background: #F0ADAD'>       |    xmlns:swe=&quot;http://www.opengis.net/swe/2.0&quot;
</span>276 <span style=''></span><span style='background: #F0ADAD'>       |    xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
</span>277 <span style=''></span><span style='background: #F0ADAD'>       |    xmlns:swes=&quot;http://www.opengis.net/swes/2.0&quot;
</span>278 <span style=''></span><span style='background: #F0ADAD'>       |    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; service=&quot;SOS&quot; version=&quot;2.0.0&quot; xsi:schemaLocation=&quot;http://www.opengis.net/sos/2.0 http://schemas.opengis.net/sos/2.0/sos.xsd&quot;&gt;
</span>279 <span style=''></span><span style='background: #F0ADAD'>       |
</span>280 <span style=''></span><span style='background: #F0ADAD'>       |    &lt;sos:procedure&gt;${timeseries.procedure}&lt;/sos:procedure&gt;
</span>281 <span style=''></span><span style='background: #F0ADAD'>       |
</span>282 <span style=''></span><span style='background: #F0ADAD'>       |    &lt;sos:offering&gt;${timeseries.offering}&lt;/sos:offering&gt;
</span>283 <span style=''></span><span style='background: #F0ADAD'>       |
</span>284 <span style=''></span><span style='background: #F0ADAD'>       |    &lt;sos:observedProperty&gt;${timeseries.observedProperty}&lt;/sos:observedProperty&gt;
</span>285 <span style=''></span><span style='background: #F0ADAD'>       |
</span>286 <span style=''></span><span style='background: #F0ADAD'>       |    &lt;sos:temporalFilter&gt;
</span>287 <span style=''></span><span style='background: #F0ADAD'>       |        &lt;fes:During&gt;
</span>288 <span style=''></span><span style='background: #F0ADAD'>       |            &lt;fes:ValueReference&gt;phenomenonTime&lt;/fes:ValueReference&gt;
</span>289 <span style=''></span><span style='background: #F0ADAD'>       |            &lt;gml:TimePeriod gml:id=&quot;tp_1&quot;&gt;
</span>290 <span style=''></span><span style='background: #F0ADAD'>       |                &lt;gml:beginPosition&gt;${timeseries.fromDate}&lt;/gml:beginPosition&gt;
</span>291 <span style=''></span><span style='background: #F0ADAD'>       |                &lt;gml:endPosition&gt;${timeseries.toDate}&lt;/gml:endPosition&gt;
</span>292 <span style=''></span><span style='background: #F0ADAD'>       |            &lt;/gml:TimePeriod&gt;
</span>293 <span style=''></span><span style='background: #F0ADAD'>       |        &lt;/fes:During&gt;
</span>294 <span style=''></span><span style='background: #F0ADAD'>       |    &lt;/sos:temporalFilter&gt;
</span>295 <span style=''></span><span style='background: #F0ADAD'>       |
</span>296 <span style=''></span><span style='background: #F0ADAD'>       |    &lt;sos:featureOfInterest&gt;${timeseries.featureOfInterest}&lt;/sos:featureOfInterest&gt;
</span>297 <span style=''></span><span style='background: #F0ADAD'>       |
</span>298 <span style=''></span><span style='background: #F0ADAD'>       |    &lt;sos:responseFormat&gt;$responseFormat&lt;/sos:responseFormat&gt;
</span>299 <span style=''></span><span style='background: #F0ADAD'>       |&lt;/sos:GetObservation&gt;
</span>300 <span style=''></span><span style='background: #F0ADAD'>          &quot;&quot;&quot;.stripMargin</span><span style=''>
</span>301 <span style=''>  }
</span>302 <span style=''>
</span>303 <span style=''>  /**
</span>304 <span style=''>    * gets Capabilities from s specified SOS server.
</span>305 <span style=''>    *
</span>306 <span style=''>    * @param sosUrl
</span>307 <span style=''>    * @return
</span>308 <span style=''>    */
</span>309 <span style=''>  def getCapabilities(sosUrl: String): Action[AnyContent] = </span><span style='background: #F0ADAD'>Action.async { request =&gt;
</span>310 <span style=''></span><span style='background: #F0ADAD'>
</span>311 <span style=''></span><span style='background: #F0ADAD'>    val responseFuture = retrieveSosCapabilities(sosUrl)
</span>312 <span style=''></span><span style='background: #F0ADAD'>
</span>313 <span style=''></span><span style='background: #F0ADAD'>    // still normal future recover
</span>314 <span style=''></span><span style='background: #F0ADAD'>    responseFuture.recover {
</span>315 <span style=''></span><span style='background: #F0ADAD'>      case e: Exception =&gt;
</span>316 <span style=''></span><span style='background: #F0ADAD'>        logger.error(&quot;Sos get capabilities threw exception&quot;, e)
</span>317 <span style=''></span><span style='background: #F0ADAD'>        val error = ErrorResult(s&quot;Exception (${e.getClass.getCanonicalName}) on SOS get capabilities.&quot;,
</span>318 <span style=''></span><span style='background: #F0ADAD'>          Some(e.getMessage))
</span>319 <span style=''></span><span style='background: #F0ADAD'>        InternalServerError(Json.toJson(error)).as(JSON)
</span>320 <span style=''></span><span style='background: #F0ADAD'>    }
</span>321 <span style=''></span><span style='background: #F0ADAD'>
</span>322 <span style=''></span><span style='background: #F0ADAD'>    // Either future folding begins
</span>323 <span style=''></span><span style='background: #F0ADAD'>    responseFuture.map(response =&gt; {
</span>324 <span style=''></span><span style='background: #F0ADAD'>      response match {
</span>325 <span style=''></span><span style='background: #F0ADAD'>        case Right(sosCapabilities) =&gt; Ok(sosCapabilities.toJson()).as(JSON)
</span>326 <span style=''></span><span style='background: #F0ADAD'>        case Left(errorResult)  =&gt; InternalServerError(Json.toJson(errorResult)).as(JSON)
</span>327 <span style=''></span><span style='background: #F0ADAD'>      }
</span>328 <span style=''></span><span style='background: #F0ADAD'>    })
</span>329 <span style=''></span><span style='background: #F0ADAD'>  }</span><span style=''>
</span>330 <span style=''>
</span>331 <span style=''>  /**
</span>332 <span style=''>    * making the capabilities call reusable
</span>333 <span style=''>    *
</span>334 <span style=''>    * @param sosUrl
</span>335 <span style=''>    * @return
</span>336 <span style=''>    */
</span>337 <span style=''>  private def retrieveSosCapabilities(sosUrl: String): Future[Either[ErrorResult, SosCapabilities]] = {
</span>338 <span style=''>    val responseFuture = </span><span style='background: #F0ADAD'>wsClient.url(sosUrl)
</span>339 <span style=''></span><span style='background: #F0ADAD'>      .withHeaders(CONTENT_TYPE -&gt; &quot;application/xml&quot;)
</span>340 <span style=''></span><span style='background: #F0ADAD'>      .post(GET_CAPABILITIES_XML)</span><span style=''>
</span>341 <span style=''>
</span>342 <span style=''>    </span><span style='background: #F0ADAD'>responseFuture.recover {
</span>343 <span style=''></span><span style='background: #F0ADAD'>      case e: Exception =&gt;
</span>344 <span style=''></span><span style='background: #F0ADAD'>        logger.error(&quot;Sos get capabilities threw exception&quot;, e)
</span>345 <span style=''></span><span style='background: #F0ADAD'>        Left(ErrorResult(s&quot;Exception (${e.getClass.getCanonicalName}) on SOS get capabilities.&quot;,
</span>346 <span style=''></span><span style='background: #F0ADAD'>          Some(e.getMessage)))
</span>347 <span style=''></span><span style='background: #F0ADAD'>    }</span><span style=''>
</span>348 <span style=''>
</span>349 <span style=''>    </span><span style='background: #F0ADAD'>responseFuture.map(response =&gt; {
</span>350 <span style=''></span><span style='background: #F0ADAD'>      if (response.status != 200) {
</span>351 <span style=''></span><span style='background: #F0ADAD'>        logger.error(s&quot;Calling SOS ${sosUrl} HTTP result status ${response.status}&quot;)
</span>352 <span style=''></span><span style='background: #F0ADAD'>        Left(ErrorResult(s&quot;Server ${sosUrl} responded with ${response.status} on GetCapabilities&quot;,
</span>353 <span style=''></span><span style='background: #F0ADAD'>          Some(response.body)))
</span>354 <span style=''></span><span style='background: #F0ADAD'>      }
</span>355 <span style=''></span><span style='background: #F0ADAD'>      else if (!response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;)) {
</span>356 <span style=''></span><span style='background: #F0ADAD'>        logger.error(s&quot;SOS GetCapabilities result was not XML but ${response.header(&quot;Content-Type&quot;).get}&quot;)
</span>357 <span style=''></span><span style='background: #F0ADAD'>        Left(ErrorResult(s&quot;SOS GetCapabilities result was not XML but ${response.header(&quot;Content-Type&quot;).get}&quot;,
</span>358 <span style=''></span><span style='background: #F0ADAD'>          Some(response.body)))
</span>359 <span style=''></span><span style='background: #F0ADAD'>      }
</span>360 <span style=''></span><span style='background: #F0ADAD'>      else {
</span>361 <span style=''></span><span style='background: #F0ADAD'>        Right(SosCapabilities.fromXml(response.xml, sosUrl).get)
</span>362 <span style=''></span><span style='background: #F0ADAD'>      }
</span>363 <span style=''></span><span style='background: #F0ADAD'>    })</span><span style=''>
</span>364 <span style=''>  }
</span>365 <span style=''>}
</span></pre>
          </div>
          <div class="tab-pane" id="statementlist">
            <table cellspacing="0" cellpadding="0" class="table statementlist">
      <tr>
        <th>Line</th>
        <th>Stmt Id</th>
        <th>Pos</th>
        <th>Tree</th>
        <th>Symbol</th>
        <th>Code</th>
      </tr><tr>
        <td>
          47
        </td>
        <td>
          1167
        </td>
        <td>
          1778
          -
          1784
        </td>
        <td>
          Select
        </td>
        <td>
          controllers.SosDataController.config
        </td>
        <td style="background: #AEF1AE">
          SosDataController.this.config
        </td>
      </tr><tr>
        <td>
          48
        </td>
        <td>
          1168
        </td>
        <td>
          1826
          -
          1900
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.configuration.getString(&quot;datetime.timezone&quot;, SosDataController.this.configuration.getString$default$2).getOrElse[String](&quot;Pacific/Auckland&quot;)
        </td>
      </tr><tr>
        <td>
          49
        </td>
        <td>
          1169
        </td>
        <td>
          1935
          -
          1962
        </td>
        <td>
          Apply
        </td>
        <td>
          models.sosdata.Wml2Export.&lt;init&gt;
        </td>
        <td style="background: #F0ADAD">
          new models.sosdata.Wml2Export(SosDataController.this.appTimeZone)
        </td>
      </tr><tr>
        <td>
          50
        </td>
        <td>
          1170
        </td>
        <td>
          1986
          -
          2027
        </td>
        <td>
          Apply
        </td>
        <td>
          java.time.format.DateTimeFormatter.ofPattern
        </td>
        <td style="background: #F0ADAD">
          java.time.format.DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)
        </td>
      </tr><tr>
        <td>
          53
        </td>
        <td>
          1171
        </td>
        <td>
          2062
          -
          2982
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n      |&lt;sos:GetCapabilities\n      |    xmlns:xsi=\&quot;http://www.w3.org/2001/XMLSchema-instance\&quot;\n      |    xmlns:sos=\&quot;http://www.opengis.net/sos/2.0\&quot;\n      |    xmlns:ows=\&quot;http://www.opengis.net/ows/1.1\&quot;\n      |    xmlns:swe=\&quot;http://www.opengis.net/swe/2.0\&quot; service=\&quot;SOS\&quot; xsi:schemaLocation=\&quot;http://www.opengis.net/sos/2.0 http://schemas.opengis.net/sos/2.0/sosGetCapabilities.xsd\&quot;&gt;\n      |    &lt;ows:AcceptVersions&gt;\n      |        &lt;ows:Version&gt;2.0.0&lt;/ows:Version&gt;\n      |    &lt;/ows:AcceptVersions&gt;\n      |    &lt;ows:Sections&gt;\n      |        &lt;ows:Section&gt;OperationsMetadata&lt;/ows:Section&gt;\n      |        &lt;ows:Section&gt;ServiceIdentification&lt;/ows:Section&gt;\n      |        &lt;ows:Section&gt;ServiceProvider&lt;/ows:Section&gt;\n      |        &lt;ows:Section&gt;FilterCapabilities&lt;/ows:Section&gt;\n      |        &lt;ows:Section&gt;Contents&lt;/ows:Section&gt;\n      |    &lt;/ows:Sections&gt;\n      |&lt;/sos:GetCapabilities&gt;\n    &quot;
        </td>
      </tr><tr>
        <td>
          70
        </td>
        <td>
          1172
        </td>
        <td>
          2062
          -
          2994
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.immutable.StringLike.stripMargin
        </td>
        <td style="background: #AEF1AE">
          scala.this.Predef.augmentString(&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n      |&lt;sos:GetCapabilities\n      |    xmlns:xsi=\&quot;http://www.w3.org/2001/XMLSchema-instance\&quot;\n      |    xmlns:sos=\&quot;http://www.opengis.net/sos/2.0\&quot;\n      |    xmlns:ows=\&quot;http://www.opengis.net/ows/1.1\&quot;\n      |    xmlns:swe=\&quot;http://www.opengis.net/swe/2.0\&quot; service=\&quot;SOS\&quot; xsi:schemaLocation=\&quot;http://www.opengis.net/sos/2.0 http://schemas.opengis.net/sos/2.0/sosGetCapabilities.xsd\&quot;&gt;\n      |    &lt;ows:AcceptVersions&gt;\n      |        &lt;ows:Version&gt;2.0.0&lt;/ows:Version&gt;\n      |    &lt;/ows:AcceptVersions&gt;\n      |    &lt;ows:Sections&gt;\n      |        &lt;ows:Section&gt;OperationsMetadata&lt;/ows:Section&gt;\n      |        &lt;ows:Section&gt;ServiceIdentification&lt;/ows:Section&gt;\n      |        &lt;ows:Section&gt;ServiceProvider&lt;/ows:Section&gt;\n      |        &lt;ows:Section&gt;FilterCapabilities&lt;/ows:Section&gt;\n      |        &lt;ows:Section&gt;Contents&lt;/ows:Section&gt;\n      |    &lt;/ows:Sections&gt;\n      |&lt;/sos:GetCapabilities&gt;\n    &quot;).stripMargin
        </td>
      </tr><tr>
        <td>
          79
        </td>
        <td>
          1336
        </td>
        <td>
          3190
          -
          6567
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.ActionBuilder.async
        </td>
        <td style="background: #F0ADAD">
          play.api.mvc.Action.async[play.api.libs.json.JsValue](SosDataController.this.parse.json)(((request: play.api.mvc.Request[play.api.libs.json.JsValue]) =&gt; request.body.validate[models.sosdata.Timeseries](sosdata.this.Timeseries.reads).fold[scala.concurrent.Future[play.api.mvc.Result]](((errors: Seq[(play.api.libs.json.JsPath, Seq[play.api.data.validation.ValidationError])]) =&gt; {
  SosDataController.this.logger.error(play.api.libs.json.JsError.toJson(errors).toString());
  val error: models.ErrorResult = models.ErrorResult.apply(&quot;Error while validating request.&quot;, scala.Some.apply[String](play.api.libs.json.JsError.toJson(errors).toString()));
  scala.concurrent.Future.apply[play.api.mvc.Result](SosDataController.this.BadRequest.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON))(scala.concurrent.ExecutionContext.Implicits.global)
}), ((timeseries: models.sosdata.Timeseries) =&gt; {
  val sosXmlRequest: String = SosDataController.this.getObservationRequestXml(timeseries, SosDataController.this.getObservationRequestXml$default$2);
  val responseFuture: scala.concurrent.Future[play.api.libs.ws.WSResponse] = SosDataController.this.wsClient.url(timeseries.sosUrl).withHeaders(scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)).post[String](sosXmlRequest)(http.this.Writeable.wString(mvc.this.Codec.utf_8));
  responseFuture.recover[Object](({
    @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
      def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
        $anonfun.super.&lt;init&gt;();
        ()
      };
      final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x1: A1, default: A1 =&gt; B1): B1 = ((x1.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; {
          SosDataController.this.logger.error(&quot;Sos GetObservation threw exception&quot;, e);
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
        case (defaultCase$ @ _) =&gt; default.apply(x1)
      };
      final def isDefinedAt(x1: Throwable): Boolean = ((x1.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; true
        case (defaultCase$ @ _) =&gt; false
      }
    };
    new $anonfun()
  }: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global);
  responseFuture.map[play.api.mvc.Result](((response: play.api.libs.ws.WSResponse) =&gt; if (response.status.!=(200))
    {
      SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status));
      val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body));
      SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    }
  else
    if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
      {
        SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
    else
      if (timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/om/2.0&quot;).unary_!))
        {
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.Some.apply[String](response.body));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
      else
        {
          val tvp: Seq[models.tvp.TimeValuePair] = new models.tvp.XmlTvpParser().parseOm2Measurements(scala.io.Source.fromString(response.body));
          val tsdata: models.sosdata.TimeseriesData = if (tvp.isEmpty)
            {
              &lt;artifact&gt; val x$3: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
              &lt;artifact&gt; val x$4: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
              &lt;artifact&gt; val x$5: String = timeseries.timeseriesName;
              &lt;artifact&gt; val x$6: String = models.sosdata.TimeseriesData.apply$default$3;
              &lt;artifact&gt; val x$7: String = models.sosdata.TimeseriesData.apply$default$5;
              &lt;artifact&gt; val x$8: String = models.sosdata.TimeseriesData.apply$default$6;
              models.sosdata.TimeseriesData.apply(x$3, x$4, x$6, x$5, x$7, x$8)
            }
          else
            {
              &lt;artifact&gt; val x$9: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$1: models.tvp.TimeValuePair) =&gt; x$1.datetime))(collection.this.Seq.canBuildFrom[String]);
              &lt;artifact&gt; val x$10: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$2: models.tvp.TimeValuePair) =&gt; x$2.measValue))(collection.this.Seq.canBuildFrom[String]);
              &lt;artifact&gt; val x$11: String = timeseries.timeseriesName;
              &lt;artifact&gt; val x$12: String = models.sosdata.TimeseriesData.apply$default$3;
              &lt;artifact&gt; val x$13: String = models.sosdata.TimeseriesData.apply$default$5;
              &lt;artifact&gt; val x$14: String = models.sosdata.TimeseriesData.apply$default$6;
              models.sosdata.TimeseriesData.apply(x$9, x$10, x$12, x$11, x$13, x$14)
            };
          val uom: String = if (tvp.isEmpty)
            if (timeseries.uom.isEmpty)
              timeseries.observedProperty
            else
              timeseries.uom.getOrElse[String](&quot;empty&quot;)
          else
            tvp.head.measUnit;
          val result: models.sosdata.Timeseries = {
            &lt;artifact&gt; val x$15: Some[models.sosdata.TimeseriesData] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[models.sosdata.TimeseriesData](tsdata);
            &lt;artifact&gt; val x$16: Some[String] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[String](uom);
            &lt;artifact&gt; val x$17: String = timeseries.copy$default$1;
            &lt;artifact&gt; val x$18: String = timeseries.copy$default$2;
            &lt;artifact&gt; val x$19: String = timeseries.copy$default$3;
            &lt;artifact&gt; val x$20: String = timeseries.copy$default$4;
            &lt;artifact&gt; val x$21: String = timeseries.copy$default$5;
            &lt;artifact&gt; val x$22: String = timeseries.copy$default$6;
            &lt;artifact&gt; val x$23: String = timeseries.copy$default$7;
            &lt;artifact&gt; val x$24: String = timeseries.copy$default$9;
            &lt;artifact&gt; val x$25: Option[String] @scala.reflect.internal.annotations.uncheckedBounds = timeseries.copy$default$10;
            timeseries.copy(x$17, x$18, x$19, x$20, x$21, x$22, x$23, x$16, x$24, x$25, x$15)
          };
          SosDataController.this.Ok.apply[play.api.libs.json.JsValue](result.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }))(scala.concurrent.ExecutionContext.Implicits.global)
}))))
        </td>
      </tr><tr>
        <td>
          79
        </td>
        <td>
          1173
        </td>
        <td>
          3203
          -
          3213
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.BodyParsers.parse.json
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.parse.json
        </td>
      </tr><tr>
        <td>
          80
        </td>
        <td>
          1174
        </td>
        <td>
          3253
          -
          3253
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.reads
        </td>
        <td style="background: #F0ADAD">
          sosdata.this.Timeseries.reads
        </td>
      </tr><tr>
        <td>
          80
        </td>
        <td>
          1335
        </td>
        <td>
          3232
          -
          6563
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.libs.json.JsResult.fold
        </td>
        <td style="background: #F0ADAD">
          request.body.validate[models.sosdata.Timeseries](sosdata.this.Timeseries.reads).fold[scala.concurrent.Future[play.api.mvc.Result]](((errors: Seq[(play.api.libs.json.JsPath, Seq[play.api.data.validation.ValidationError])]) =&gt; {
  SosDataController.this.logger.error(play.api.libs.json.JsError.toJson(errors).toString());
  val error: models.ErrorResult = models.ErrorResult.apply(&quot;Error while validating request.&quot;, scala.Some.apply[String](play.api.libs.json.JsError.toJson(errors).toString()));
  scala.concurrent.Future.apply[play.api.mvc.Result](SosDataController.this.BadRequest.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON))(scala.concurrent.ExecutionContext.Implicits.global)
}), ((timeseries: models.sosdata.Timeseries) =&gt; {
  val sosXmlRequest: String = SosDataController.this.getObservationRequestXml(timeseries, SosDataController.this.getObservationRequestXml$default$2);
  val responseFuture: scala.concurrent.Future[play.api.libs.ws.WSResponse] = SosDataController.this.wsClient.url(timeseries.sosUrl).withHeaders(scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)).post[String](sosXmlRequest)(http.this.Writeable.wString(mvc.this.Codec.utf_8));
  responseFuture.recover[Object](({
    @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
      def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
        $anonfun.super.&lt;init&gt;();
        ()
      };
      final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x1: A1, default: A1 =&gt; B1): B1 = ((x1.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; {
          SosDataController.this.logger.error(&quot;Sos GetObservation threw exception&quot;, e);
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
        case (defaultCase$ @ _) =&gt; default.apply(x1)
      };
      final def isDefinedAt(x1: Throwable): Boolean = ((x1.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; true
        case (defaultCase$ @ _) =&gt; false
      }
    };
    new $anonfun()
  }: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global);
  responseFuture.map[play.api.mvc.Result](((response: play.api.libs.ws.WSResponse) =&gt; if (response.status.!=(200))
    {
      SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status));
      val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body));
      SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    }
  else
    if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
      {
        SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
    else
      if (timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/om/2.0&quot;).unary_!))
        {
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.Some.apply[String](response.body));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
      else
        {
          val tvp: Seq[models.tvp.TimeValuePair] = new models.tvp.XmlTvpParser().parseOm2Measurements(scala.io.Source.fromString(response.body));
          val tsdata: models.sosdata.TimeseriesData = if (tvp.isEmpty)
            {
              &lt;artifact&gt; val x$3: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
              &lt;artifact&gt; val x$4: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
              &lt;artifact&gt; val x$5: String = timeseries.timeseriesName;
              &lt;artifact&gt; val x$6: String = models.sosdata.TimeseriesData.apply$default$3;
              &lt;artifact&gt; val x$7: String = models.sosdata.TimeseriesData.apply$default$5;
              &lt;artifact&gt; val x$8: String = models.sosdata.TimeseriesData.apply$default$6;
              models.sosdata.TimeseriesData.apply(x$3, x$4, x$6, x$5, x$7, x$8)
            }
          else
            {
              &lt;artifact&gt; val x$9: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$1: models.tvp.TimeValuePair) =&gt; x$1.datetime))(collection.this.Seq.canBuildFrom[String]);
              &lt;artifact&gt; val x$10: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$2: models.tvp.TimeValuePair) =&gt; x$2.measValue))(collection.this.Seq.canBuildFrom[String]);
              &lt;artifact&gt; val x$11: String = timeseries.timeseriesName;
              &lt;artifact&gt; val x$12: String = models.sosdata.TimeseriesData.apply$default$3;
              &lt;artifact&gt; val x$13: String = models.sosdata.TimeseriesData.apply$default$5;
              &lt;artifact&gt; val x$14: String = models.sosdata.TimeseriesData.apply$default$6;
              models.sosdata.TimeseriesData.apply(x$9, x$10, x$12, x$11, x$13, x$14)
            };
          val uom: String = if (tvp.isEmpty)
            if (timeseries.uom.isEmpty)
              timeseries.observedProperty
            else
              timeseries.uom.getOrElse[String](&quot;empty&quot;)
          else
            tvp.head.measUnit;
          val result: models.sosdata.Timeseries = {
            &lt;artifact&gt; val x$15: Some[models.sosdata.TimeseriesData] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[models.sosdata.TimeseriesData](tsdata);
            &lt;artifact&gt; val x$16: Some[String] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[String](uom);
            &lt;artifact&gt; val x$17: String = timeseries.copy$default$1;
            &lt;artifact&gt; val x$18: String = timeseries.copy$default$2;
            &lt;artifact&gt; val x$19: String = timeseries.copy$default$3;
            &lt;artifact&gt; val x$20: String = timeseries.copy$default$4;
            &lt;artifact&gt; val x$21: String = timeseries.copy$default$5;
            &lt;artifact&gt; val x$22: String = timeseries.copy$default$6;
            &lt;artifact&gt; val x$23: String = timeseries.copy$default$7;
            &lt;artifact&gt; val x$24: String = timeseries.copy$default$9;
            &lt;artifact&gt; val x$25: Option[String] @scala.reflect.internal.annotations.uncheckedBounds = timeseries.copy$default$10;
            timeseries.copy(x$17, x$18, x$19, x$20, x$21, x$22, x$23, x$16, x$24, x$25, x$15)
          };
          SosDataController.this.Ok.apply[play.api.libs.json.JsValue](result.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }))(scala.concurrent.ExecutionContext.Implicits.global)
}))
        </td>
      </tr><tr>
        <td>
          82
        </td>
        <td>
          1176
        </td>
        <td>
          3298
          -
          3345
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(play.api.libs.json.JsError.toJson(errors).toString())
        </td>
      </tr><tr>
        <td>
          82
        </td>
        <td>
          1175
        </td>
        <td>
          3311
          -
          3344
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.libs.json.JsValue.toString
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.JsError.toJson(errors).toString()
        </td>
      </tr><tr>
        <td>
          83
        </td>
        <td>
          1178
        </td>
        <td>
          3418
          -
          3449
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.libs.json.JsValue.toString
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.JsError.toJson(errors).toString()
        </td>
      </tr><tr>
        <td>
          83
        </td>
        <td>
          1177
        </td>
        <td>
          3378
          -
          3411
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Error while validating request.&quot;
        </td>
      </tr><tr>
        <td>
          83
        </td>
        <td>
          1180
        </td>
        <td>
          3366
          -
          3451
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(&quot;Error while validating request.&quot;, scala.Some.apply[String](play.api.libs.json.JsError.toJson(errors).toString()))
        </td>
      </tr><tr>
        <td>
          83
        </td>
        <td>
          1179
        </td>
        <td>
          3413
          -
          3450
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](play.api.libs.json.JsError.toJson(errors).toString())
        </td>
      </tr><tr>
        <td>
          84
        </td>
        <td>
          1187
        </td>
        <td>
          3460
          -
          3528
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.apply
        </td>
        <td style="background: #F0ADAD">
          scala.concurrent.Future.apply[play.api.mvc.Result](SosDataController.this.BadRequest.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          85
        </td>
        <td>
          1186
        </td>
        <td>
          3479
          -
          3518
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.BadRequest.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          85
        </td>
        <td>
          1183
        </td>
        <td>
          3489
          -
          3489
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          85
        </td>
        <td>
          1185
        </td>
        <td>
          3513
          -
          3517
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          85
        </td>
        <td>
          1182
        </td>
        <td>
          3490
          -
          3508
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          85
        </td>
        <td>
          1181
        </td>
        <td>
          3501
          -
          3501
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          85
        </td>
        <td>
          1184
        </td>
        <td>
          3489
          -
          3489
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          90
        </td>
        <td>
          1189
        </td>
        <td>
          3589
          -
          3625
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.getObservationRequestXml
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.getObservationRequestXml(timeseries, SosDataController.this.getObservationRequestXml$default$2)
        </td>
      </tr><tr>
        <td>
          90
        </td>
        <td>
          1188
        </td>
        <td>
          3589
          -
          3589
        </td>
        <td>
          Select
        </td>
        <td>
          controllers.SosDataController.getObservationRequestXml$default$2
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.getObservationRequestXml$default$2
        </td>
      </tr><tr>
        <td>
          91
        </td>
        <td>
          1190
        </td>
        <td>
          3668
          -
          3685
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.sosUrl
        </td>
        <td style="background: #F0ADAD">
          timeseries.sosUrl
        </td>
      </tr><tr>
        <td>
          92
        </td>
        <td>
          1191
        </td>
        <td>
          3710
          -
          3743
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.ArrowAssoc.-&gt;
        </td>
        <td style="background: #F0ADAD">
          scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)
        </td>
      </tr><tr>
        <td>
          93
        </td>
        <td>
          1192
        </td>
        <td>
          3760
          -
          3760
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          93
        </td>
        <td>
          1194
        </td>
        <td>
          3655
          -
          3775
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.ws.WSRequest.post
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.wsClient.url(timeseries.sosUrl).withHeaders(scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)).post[String](sosXmlRequest)(http.this.Writeable.wString(mvc.this.Codec.utf_8))
        </td>
      </tr><tr>
        <td>
          93
        </td>
        <td>
          1193
        </td>
        <td>
          3760
          -
          3760
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.wString
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.wString(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          95
        </td>
        <td>
          1210
        </td>
        <td>
          3785
          -
          4119
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.recover
        </td>
        <td style="background: #F0ADAD">
          responseFuture.recover[Object](({
  @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
    def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
      $anonfun.super.&lt;init&gt;();
      ()
    };
    final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x1: A1, default: A1 =&gt; B1): B1 = ((x1.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; {
        SosDataController.this.logger.error(&quot;Sos GetObservation threw exception&quot;, e);
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
      case (defaultCase$ @ _) =&gt; default.apply(x1)
    };
    final def isDefinedAt(x1: Throwable): Boolean = ((x1.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; true
      case (defaultCase$ @ _) =&gt; false
    }
  };
  new $anonfun()
}: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          95
        </td>
        <td>
          1209
        </td>
        <td>
          3808
          -
          3808
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.$anonfun.&lt;init&gt;
        </td>
        <td style="background: #F0ADAD">
          new $anonfun()
        </td>
      </tr><tr>
        <td>
          97
        </td>
        <td>
          1195
        </td>
        <td>
          3853
          -
          3906
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(&quot;Sos GetObservation threw exception&quot;, e)
        </td>
      </tr><tr>
        <td>
          98
        </td>
        <td>
          1196
        </td>
        <td>
          3945
          -
          3957
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Exception (&quot;
        </td>
      </tr><tr>
        <td>
          98
        </td>
        <td>
          1198
        </td>
        <td>
          3958
          -
          3985
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Class.getCanonicalName
        </td>
        <td style="background: #F0ADAD">
          e.getClass().getCanonicalName()
        </td>
      </tr><tr>
        <td>
          98
        </td>
        <td>
          1197
        </td>
        <td>
          3986
          -
          4013
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;) on SOS get capabilities.&quot;
        </td>
      </tr><tr>
        <td>
          98
        </td>
        <td>
          1199
        </td>
        <td>
          3943
          -
          4013
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName())
        </td>
      </tr><tr>
        <td>
          98
        </td>
        <td>
          1202
        </td>
        <td>
          3931
          -
          4048
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()))
        </td>
      </tr><tr>
        <td>
          99
        </td>
        <td>
          1201
        </td>
        <td>
          4029
          -
          4047
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](e.getMessage())
        </td>
      </tr><tr>
        <td>
          99
        </td>
        <td>
          1200
        </td>
        <td>
          4034
          -
          4046
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Throwable.getMessage
        </td>
        <td style="background: #F0ADAD">
          e.getMessage()
        </td>
      </tr><tr>
        <td>
          100
        </td>
        <td>
          1205
        </td>
        <td>
          4080
          -
          4080
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          100
        </td>
        <td>
          1204
        </td>
        <td>
          4081
          -
          4099
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          100
        </td>
        <td>
          1207
        </td>
        <td>
          4104
          -
          4108
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          100
        </td>
        <td>
          1203
        </td>
        <td>
          4092
          -
          4092
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          100
        </td>
        <td>
          1206
        </td>
        <td>
          4080
          -
          4080
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          100
        </td>
        <td>
          1208
        </td>
        <td>
          4061
          -
          4109
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          103
        </td>
        <td>
          1334
        </td>
        <td>
          4129
          -
          6549
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.map
        </td>
        <td style="background: #F0ADAD">
          responseFuture.map[play.api.mvc.Result](((response: play.api.libs.ws.WSResponse) =&gt; if (response.status.!=(200))
  {
    SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status));
    val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body));
    SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
  }
else
  if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
    {
      SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
      val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
      SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    }
  else
    if (timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/om/2.0&quot;).unary_!))
      {
        SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.Some.apply[String](response.body));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
    else
      {
        val tvp: Seq[models.tvp.TimeValuePair] = new models.tvp.XmlTvpParser().parseOm2Measurements(scala.io.Source.fromString(response.body));
        val tsdata: models.sosdata.TimeseriesData = if (tvp.isEmpty)
          {
            &lt;artifact&gt; val x$3: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
            &lt;artifact&gt; val x$4: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
            &lt;artifact&gt; val x$5: String = timeseries.timeseriesName;
            &lt;artifact&gt; val x$6: String = models.sosdata.TimeseriesData.apply$default$3;
            &lt;artifact&gt; val x$7: String = models.sosdata.TimeseriesData.apply$default$5;
            &lt;artifact&gt; val x$8: String = models.sosdata.TimeseriesData.apply$default$6;
            models.sosdata.TimeseriesData.apply(x$3, x$4, x$6, x$5, x$7, x$8)
          }
        else
          {
            &lt;artifact&gt; val x$9: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$1: models.tvp.TimeValuePair) =&gt; x$1.datetime))(collection.this.Seq.canBuildFrom[String]);
            &lt;artifact&gt; val x$10: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$2: models.tvp.TimeValuePair) =&gt; x$2.measValue))(collection.this.Seq.canBuildFrom[String]);
            &lt;artifact&gt; val x$11: String = timeseries.timeseriesName;
            &lt;artifact&gt; val x$12: String = models.sosdata.TimeseriesData.apply$default$3;
            &lt;artifact&gt; val x$13: String = models.sosdata.TimeseriesData.apply$default$5;
            &lt;artifact&gt; val x$14: String = models.sosdata.TimeseriesData.apply$default$6;
            models.sosdata.TimeseriesData.apply(x$9, x$10, x$12, x$11, x$13, x$14)
          };
        val uom: String = if (tvp.isEmpty)
          if (timeseries.uom.isEmpty)
            timeseries.observedProperty
          else
            timeseries.uom.getOrElse[String](&quot;empty&quot;)
        else
          tvp.head.measUnit;
        val result: models.sosdata.Timeseries = {
          &lt;artifact&gt; val x$15: Some[models.sosdata.TimeseriesData] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[models.sosdata.TimeseriesData](tsdata);
          &lt;artifact&gt; val x$16: Some[String] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[String](uom);
          &lt;artifact&gt; val x$17: String = timeseries.copy$default$1;
          &lt;artifact&gt; val x$18: String = timeseries.copy$default$2;
          &lt;artifact&gt; val x$19: String = timeseries.copy$default$3;
          &lt;artifact&gt; val x$20: String = timeseries.copy$default$4;
          &lt;artifact&gt; val x$21: String = timeseries.copy$default$5;
          &lt;artifact&gt; val x$22: String = timeseries.copy$default$6;
          &lt;artifact&gt; val x$23: String = timeseries.copy$default$7;
          &lt;artifact&gt; val x$24: String = timeseries.copy$default$9;
          &lt;artifact&gt; val x$25: Option[String] @scala.reflect.internal.annotations.uncheckedBounds = timeseries.copy$default$10;
          timeseries.copy(x$17, x$18, x$19, x$20, x$21, x$22, x$23, x$16, x$24, x$25, x$15)
        };
        SosDataController.this.Ok.apply[play.api.libs.json.JsValue](result.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          104
        </td>
        <td>
          1234
        </td>
        <td>
          4200
          -
          4547
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status));
  val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body));
  SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          104
        </td>
        <td>
          1211
        </td>
        <td>
          4176
          -
          4198
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.!=
        </td>
        <td style="background: #F0ADAD">
          response.status.!=(200)
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          1214
        </td>
        <td>
          4299
          -
          4318
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; on GetObservation&quot;
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          1213
        </td>
        <td>
          4261
          -
          4282
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; HTTP result status &quot;
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          1216
        </td>
        <td>
          4283
          -
          4298
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.status
        </td>
        <td style="background: #F0ADAD">
          response.status
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          1218
        </td>
        <td>
          4214
          -
          4319
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status))
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          1212
        </td>
        <td>
          4229
          -
          4242
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Calling SOS &quot;
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          1215
        </td>
        <td>
          4243
          -
          4260
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.sosUrl
        </td>
        <td style="background: #F0ADAD">
          timeseries.sosUrl
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          1217
        </td>
        <td>
          4227
          -
          4318
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status)
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          1222
        </td>
        <td>
          4367
          -
          4384
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.sosUrl
        </td>
        <td style="background: #F0ADAD">
          timeseries.sosUrl
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          1219
        </td>
        <td>
          4358
          -
          4366
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Server &quot;
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          1227
        </td>
        <td>
          4344
          -
          4474
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body))
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          1221
        </td>
        <td>
          4419
          -
          4438
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; on GetObservation&quot;
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          1224
        </td>
        <td>
          4356
          -
          4438
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status)
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          1223
        </td>
        <td>
          4403
          -
          4418
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.status
        </td>
        <td style="background: #F0ADAD">
          response.status
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          1220
        </td>
        <td>
          4385
          -
          4402
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; responded with &quot;
        </td>
      </tr><tr>
        <td>
          107
        </td>
        <td>
          1225
        </td>
        <td>
          4459
          -
          4472
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          107
        </td>
        <td>
          1226
        </td>
        <td>
          4454
          -
          4473
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](response.body)
        </td>
      </tr><tr>
        <td>
          108
        </td>
        <td>
          1231
        </td>
        <td>
          4506
          -
          4506
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          108
        </td>
        <td>
          1228
        </td>
        <td>
          4518
          -
          4518
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          108
        </td>
        <td>
          1230
        </td>
        <td>
          4506
          -
          4506
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          108
        </td>
        <td>
          1233
        </td>
        <td>
          4487
          -
          4535
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          108
        </td>
        <td>
          1232
        </td>
        <td>
          4530
          -
          4534
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          108
        </td>
        <td>
          1229
        </td>
        <td>
          4507
          -
          4525
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          1333
        </td>
        <td>
          4563
          -
          6538
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
  {
    SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
    val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
    SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
  }
else
  if (timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/om/2.0&quot;).unary_!))
    {
      SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
      val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.Some.apply[String](response.body));
      SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    }
  else
    {
      val tvp: Seq[models.tvp.TimeValuePair] = new models.tvp.XmlTvpParser().parseOm2Measurements(scala.io.Source.fromString(response.body));
      val tsdata: models.sosdata.TimeseriesData = if (tvp.isEmpty)
        {
          &lt;artifact&gt; val x$3: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
          &lt;artifact&gt; val x$4: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
          &lt;artifact&gt; val x$5: String = timeseries.timeseriesName;
          &lt;artifact&gt; val x$6: String = models.sosdata.TimeseriesData.apply$default$3;
          &lt;artifact&gt; val x$7: String = models.sosdata.TimeseriesData.apply$default$5;
          &lt;artifact&gt; val x$8: String = models.sosdata.TimeseriesData.apply$default$6;
          models.sosdata.TimeseriesData.apply(x$3, x$4, x$6, x$5, x$7, x$8)
        }
      else
        {
          &lt;artifact&gt; val x$9: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$1: models.tvp.TimeValuePair) =&gt; x$1.datetime))(collection.this.Seq.canBuildFrom[String]);
          &lt;artifact&gt; val x$10: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$2: models.tvp.TimeValuePair) =&gt; x$2.measValue))(collection.this.Seq.canBuildFrom[String]);
          &lt;artifact&gt; val x$11: String = timeseries.timeseriesName;
          &lt;artifact&gt; val x$12: String = models.sosdata.TimeseriesData.apply$default$3;
          &lt;artifact&gt; val x$13: String = models.sosdata.TimeseriesData.apply$default$5;
          &lt;artifact&gt; val x$14: String = models.sosdata.TimeseriesData.apply$default$6;
          models.sosdata.TimeseriesData.apply(x$9, x$10, x$12, x$11, x$13, x$14)
        };
      val uom: String = if (tvp.isEmpty)
        if (timeseries.uom.isEmpty)
          timeseries.observedProperty
        else
          timeseries.uom.getOrElse[String](&quot;empty&quot;)
      else
        tvp.head.measUnit;
      val result: models.sosdata.Timeseries = {
        &lt;artifact&gt; val x$15: Some[models.sosdata.TimeseriesData] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[models.sosdata.TimeseriesData](tsdata);
        &lt;artifact&gt; val x$16: Some[String] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[String](uom);
        &lt;artifact&gt; val x$17: String = timeseries.copy$default$1;
        &lt;artifact&gt; val x$18: String = timeseries.copy$default$2;
        &lt;artifact&gt; val x$19: String = timeseries.copy$default$3;
        &lt;artifact&gt; val x$20: String = timeseries.copy$default$4;
        &lt;artifact&gt; val x$21: String = timeseries.copy$default$5;
        &lt;artifact&gt; val x$22: String = timeseries.copy$default$6;
        &lt;artifact&gt; val x$23: String = timeseries.copy$default$7;
        &lt;artifact&gt; val x$24: String = timeseries.copy$default$9;
        &lt;artifact&gt; val x$25: Option[String] @scala.reflect.internal.annotations.uncheckedBounds = timeseries.copy$default$10;
        timeseries.copy(x$17, x$18, x$19, x$20, x$21, x$22, x$23, x$16, x$24, x$25, x$15)
      };
      SosDataController.this.Ok.apply[play.api.libs.json.JsValue](result.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    }
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          1237
        </td>
        <td>
          4567
          -
          4631
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          1258
        </td>
        <td>
          4633
          -
          4988
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
  val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
  SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          1236
        </td>
        <td>
          4613
          -
          4630
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;application/xml&quot;
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          1235
        </td>
        <td>
          4584
          -
          4598
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          1240
        </td>
        <td>
          4722
          -
          4736
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          1243
        </td>
        <td>
          4647
          -
          4744
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get))
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          1239
        </td>
        <td>
          4742
          -
          4743
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          1242
        </td>
        <td>
          4660
          -
          4743
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get)
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          1241
        </td>
        <td>
          4706
          -
          4741
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.get
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          1238
        </td>
        <td>
          4662
          -
          4705
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetObservation result was not XML but &quot;
        </td>
      </tr><tr>
        <td>
          112
        </td>
        <td>
          1251
        </td>
        <td>
          4769
          -
          4915
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body))
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          1246
        </td>
        <td>
          4858
          -
          4872
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          1245
        </td>
        <td>
          4878
          -
          4879
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          1248
        </td>
        <td>
          4796
          -
          4879
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get)
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          1244
        </td>
        <td>
          4798
          -
          4841
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetObservation result was not XML but &quot;
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          1247
        </td>
        <td>
          4842
          -
          4877
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.get
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          1249
        </td>
        <td>
          4900
          -
          4913
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          114
        </td>
        <td>
          1250
        </td>
        <td>
          4895
          -
          4914
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](response.body)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          1255
        </td>
        <td>
          4947
          -
          4947
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          1252
        </td>
        <td>
          4959
          -
          4959
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          1254
        </td>
        <td>
          4947
          -
          4947
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          1257
        </td>
        <td>
          4928
          -
          4976
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          1253
        </td>
        <td>
          4948
          -
          4966
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          1256
        </td>
        <td>
          4971
          -
          4975
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          1261
        </td>
        <td>
          5008
          -
          5127
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/om/2.0&quot;).unary_!)
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          1260
        </td>
        <td>
          5047
          -
          5127
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/om/2.0&quot;).unary_!
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          1332
        </td>
        <td>
          5004
          -
          6538
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          if (timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/om/2.0&quot;).unary_!))
  {
    SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
    val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.Some.apply[String](response.body));
    SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
  }
else
  {
    val tvp: Seq[models.tvp.TimeValuePair] = new models.tvp.XmlTvpParser().parseOm2Measurements(scala.io.Source.fromString(response.body));
    val tsdata: models.sosdata.TimeseriesData = if (tvp.isEmpty)
      {
        &lt;artifact&gt; val x$3: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
        &lt;artifact&gt; val x$4: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
        &lt;artifact&gt; val x$5: String = timeseries.timeseriesName;
        &lt;artifact&gt; val x$6: String = models.sosdata.TimeseriesData.apply$default$3;
        &lt;artifact&gt; val x$7: String = models.sosdata.TimeseriesData.apply$default$5;
        &lt;artifact&gt; val x$8: String = models.sosdata.TimeseriesData.apply$default$6;
        models.sosdata.TimeseriesData.apply(x$3, x$4, x$6, x$5, x$7, x$8)
      }
    else
      {
        &lt;artifact&gt; val x$9: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$1: models.tvp.TimeValuePair) =&gt; x$1.datetime))(collection.this.Seq.canBuildFrom[String]);
        &lt;artifact&gt; val x$10: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$2: models.tvp.TimeValuePair) =&gt; x$2.measValue))(collection.this.Seq.canBuildFrom[String]);
        &lt;artifact&gt; val x$11: String = timeseries.timeseriesName;
        &lt;artifact&gt; val x$12: String = models.sosdata.TimeseriesData.apply$default$3;
        &lt;artifact&gt; val x$13: String = models.sosdata.TimeseriesData.apply$default$5;
        &lt;artifact&gt; val x$14: String = models.sosdata.TimeseriesData.apply$default$6;
        models.sosdata.TimeseriesData.apply(x$9, x$10, x$12, x$11, x$13, x$14)
      };
    val uom: String = if (tvp.isEmpty)
      if (timeseries.uom.isEmpty)
        timeseries.observedProperty
      else
        timeseries.uom.getOrElse[String](&quot;empty&quot;)
    else
      tvp.head.measUnit;
    val result: models.sosdata.Timeseries = {
      &lt;artifact&gt; val x$15: Some[models.sosdata.TimeseriesData] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[models.sosdata.TimeseriesData](tsdata);
      &lt;artifact&gt; val x$16: Some[String] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[String](uom);
      &lt;artifact&gt; val x$17: String = timeseries.copy$default$1;
      &lt;artifact&gt; val x$18: String = timeseries.copy$default$2;
      &lt;artifact&gt; val x$19: String = timeseries.copy$default$3;
      &lt;artifact&gt; val x$20: String = timeseries.copy$default$4;
      &lt;artifact&gt; val x$21: String = timeseries.copy$default$5;
      &lt;artifact&gt; val x$22: String = timeseries.copy$default$6;
      &lt;artifact&gt; val x$23: String = timeseries.copy$default$7;
      &lt;artifact&gt; val x$24: String = timeseries.copy$default$9;
      &lt;artifact&gt; val x$25: Option[String] @scala.reflect.internal.annotations.uncheckedBounds = timeseries.copy$default$10;
      timeseries.copy(x$17, x$18, x$19, x$20, x$21, x$22, x$23, x$16, x$24, x$25, x$15)
    };
    SosDataController.this.Ok.apply[play.api.libs.json.JsValue](result.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
  }
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          1259
        </td>
        <td>
          5095
          -
          5126
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;http://www.opengis.net/om/2.0&quot;
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          1280
        </td>
        <td>
          5129
          -
          5544
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
  val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.Some.apply[String](response.body));
  SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          1264
        </td>
        <td>
          5224
          -
          5267
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.getOrElse[String](&quot;none&quot;)
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          1263
        </td>
        <td>
          5268
          -
          5269
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          1266
        </td>
        <td>
          5143
          -
          5270
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)))
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          1262
        </td>
        <td>
          5158
          -
          5223
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetObservation responseFormat unsupported for this request; &quot;
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          1265
        </td>
        <td>
          5156
          -
          5269
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;))
        </td>
      </tr><tr>
        <td>
          119
        </td>
        <td>
          1273
        </td>
        <td>
          5295
          -
          5471
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.Some.apply[String](response.body))
        </td>
      </tr><tr>
        <td>
          120
        </td>
        <td>
          1267
        </td>
        <td>
          5324
          -
          5389
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetObservation responseFormat unsupported for this request; &quot;
        </td>
      </tr><tr>
        <td>
          120
        </td>
        <td>
          1270
        </td>
        <td>
          5322
          -
          5435
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;))
        </td>
      </tr><tr>
        <td>
          120
        </td>
        <td>
          1269
        </td>
        <td>
          5390
          -
          5433
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.getOrElse[String](&quot;none&quot;)
        </td>
      </tr><tr>
        <td>
          120
        </td>
        <td>
          1268
        </td>
        <td>
          5434
          -
          5435
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          121
        </td>
        <td>
          1272
        </td>
        <td>
          5451
          -
          5470
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](response.body)
        </td>
      </tr><tr>
        <td>
          121
        </td>
        <td>
          1271
        </td>
        <td>
          5456
          -
          5469
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          1276
        </td>
        <td>
          5503
          -
          5503
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          1279
        </td>
        <td>
          5484
          -
          5532
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          1278
        </td>
        <td>
          5527
          -
          5531
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          1275
        </td>
        <td>
          5504
          -
          5522
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          1277
        </td>
        <td>
          5503
          -
          5503
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          1274
        </td>
        <td>
          5515
          -
          5515
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          124
        </td>
        <td>
          1331
        </td>
        <td>
          5560
          -
          6538
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  val tvp: Seq[models.tvp.TimeValuePair] = new models.tvp.XmlTvpParser().parseOm2Measurements(scala.io.Source.fromString(response.body));
  val tsdata: models.sosdata.TimeseriesData = if (tvp.isEmpty)
    {
      &lt;artifact&gt; val x$3: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
      &lt;artifact&gt; val x$4: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
      &lt;artifact&gt; val x$5: String = timeseries.timeseriesName;
      &lt;artifact&gt; val x$6: String = models.sosdata.TimeseriesData.apply$default$3;
      &lt;artifact&gt; val x$7: String = models.sosdata.TimeseriesData.apply$default$5;
      &lt;artifact&gt; val x$8: String = models.sosdata.TimeseriesData.apply$default$6;
      models.sosdata.TimeseriesData.apply(x$3, x$4, x$6, x$5, x$7, x$8)
    }
  else
    {
      &lt;artifact&gt; val x$9: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$1: models.tvp.TimeValuePair) =&gt; x$1.datetime))(collection.this.Seq.canBuildFrom[String]);
      &lt;artifact&gt; val x$10: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$2: models.tvp.TimeValuePair) =&gt; x$2.measValue))(collection.this.Seq.canBuildFrom[String]);
      &lt;artifact&gt; val x$11: String = timeseries.timeseriesName;
      &lt;artifact&gt; val x$12: String = models.sosdata.TimeseriesData.apply$default$3;
      &lt;artifact&gt; val x$13: String = models.sosdata.TimeseriesData.apply$default$5;
      &lt;artifact&gt; val x$14: String = models.sosdata.TimeseriesData.apply$default$6;
      models.sosdata.TimeseriesData.apply(x$9, x$10, x$12, x$11, x$13, x$14)
    };
  val uom: String = if (tvp.isEmpty)
    if (timeseries.uom.isEmpty)
      timeseries.observedProperty
    else
      timeseries.uom.getOrElse[String](&quot;empty&quot;)
  else
    tvp.head.measUnit;
  val result: models.sosdata.Timeseries = {
    &lt;artifact&gt; val x$15: Some[models.sosdata.TimeseriesData] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[models.sosdata.TimeseriesData](tsdata);
    &lt;artifact&gt; val x$16: Some[String] @scala.reflect.internal.annotations.uncheckedBounds = scala.Some.apply[String](uom);
    &lt;artifact&gt; val x$17: String = timeseries.copy$default$1;
    &lt;artifact&gt; val x$18: String = timeseries.copy$default$2;
    &lt;artifact&gt; val x$19: String = timeseries.copy$default$3;
    &lt;artifact&gt; val x$20: String = timeseries.copy$default$4;
    &lt;artifact&gt; val x$21: String = timeseries.copy$default$5;
    &lt;artifact&gt; val x$22: String = timeseries.copy$default$6;
    &lt;artifact&gt; val x$23: String = timeseries.copy$default$7;
    &lt;artifact&gt; val x$24: String = timeseries.copy$default$9;
    &lt;artifact&gt; val x$25: Option[String] @scala.reflect.internal.annotations.uncheckedBounds = timeseries.copy$default$10;
    timeseries.copy(x$17, x$18, x$19, x$20, x$21, x$22, x$23, x$16, x$24, x$25, x$15)
  };
  SosDataController.this.Ok.apply[play.api.libs.json.JsValue](result.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          125
        </td>
        <td>
          1282
        </td>
        <td>
          5624
          -
          5656
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.io.Source.fromString
        </td>
        <td style="background: #F0ADAD">
          scala.io.Source.fromString(response.body)
        </td>
      </tr><tr>
        <td>
          125
        </td>
        <td>
          1281
        </td>
        <td>
          5642
          -
          5655
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          125
        </td>
        <td>
          1283
        </td>
        <td>
          5584
          -
          5657
        </td>
        <td>
          Apply
        </td>
        <td>
          models.tvp.XmlTvpParser.parseOm2Measurements
        </td>
        <td style="background: #F0ADAD">
          new models.tvp.XmlTvpParser().parseOm2Measurements(scala.io.Source.fromString(response.body))
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          1284
        </td>
        <td>
          5701
          -
          5712
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.SeqLike.isEmpty
        </td>
        <td style="background: #F0ADAD">
          tvp.isEmpty
        </td>
      </tr><tr>
        <td>
          128
        </td>
        <td>
          1291
        </td>
        <td>
          5732
          -
          5898
        </td>
        <td>
          Apply
        </td>
        <td>
          models.sosdata.TimeseriesData.apply
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.TimeseriesData.apply(x$3, x$4, x$6, x$5, x$7, x$8)
        </td>
      </tr><tr>
        <td>
          128
        </td>
        <td>
          1288
        </td>
        <td>
          5732
          -
          5732
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.TimeseriesData.apply$default$3
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.TimeseriesData.apply$default$3
        </td>
      </tr><tr>
        <td>
          128
        </td>
        <td>
          1290
        </td>
        <td>
          5732
          -
          5732
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.TimeseriesData.apply$default$6
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.TimeseriesData.apply$default$6
        </td>
      </tr><tr>
        <td>
          128
        </td>
        <td>
          1292
        </td>
        <td>
          5732
          -
          5898
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  &lt;artifact&gt; val x$3: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
  &lt;artifact&gt; val x$4: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = collection.this.Seq.empty[String];
  &lt;artifact&gt; val x$5: String = timeseries.timeseriesName;
  &lt;artifact&gt; val x$6: String = models.sosdata.TimeseriesData.apply$default$3;
  &lt;artifact&gt; val x$7: String = models.sosdata.TimeseriesData.apply$default$5;
  &lt;artifact&gt; val x$8: String = models.sosdata.TimeseriesData.apply$default$6;
  models.sosdata.TimeseriesData.apply(x$3, x$4, x$6, x$5, x$7, x$8)
}
        </td>
      </tr><tr>
        <td>
          128
        </td>
        <td>
          1289
        </td>
        <td>
          5732
          -
          5732
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.TimeseriesData.apply$default$5
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.TimeseriesData.apply$default$5
        </td>
      </tr><tr>
        <td>
          129
        </td>
        <td>
          1285
        </td>
        <td>
          5770
          -
          5787
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.empty
        </td>
        <td style="background: #F0ADAD">
          collection.this.Seq.empty[String]
        </td>
      </tr><tr>
        <td>
          130
        </td>
        <td>
          1286
        </td>
        <td>
          5811
          -
          5828
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.empty
        </td>
        <td style="background: #F0ADAD">
          collection.this.Seq.empty[String]
        </td>
      </tr><tr>
        <td>
          131
        </td>
        <td>
          1287
        </td>
        <td>
          5855
          -
          5880
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.timeseriesName
        </td>
        <td style="background: #F0ADAD">
          timeseries.timeseriesName
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          1300
        </td>
        <td>
          5952
          -
          5952
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.TimeseriesData.apply$default$3
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.TimeseriesData.apply$default$3
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          1303
        </td>
        <td>
          5952
          -
          6123
        </td>
        <td>
          Apply
        </td>
        <td>
          models.sosdata.TimeseriesData.apply
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.TimeseriesData.apply(x$9, x$10, x$12, x$11, x$13, x$14)
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          1302
        </td>
        <td>
          5952
          -
          5952
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.TimeseriesData.apply$default$6
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.TimeseriesData.apply$default$6
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          1301
        </td>
        <td>
          5952
          -
          5952
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.TimeseriesData.apply$default$5
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.TimeseriesData.apply$default$5
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          1304
        </td>
        <td>
          5952
          -
          6123
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  &lt;artifact&gt; val x$9: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$1: models.tvp.TimeValuePair) =&gt; x$1.datetime))(collection.this.Seq.canBuildFrom[String]);
  &lt;artifact&gt; val x$10: Seq[String] @scala.reflect.internal.annotations.uncheckedBounds = tvp.map[String, Seq[String]](((x$2: models.tvp.TimeValuePair) =&gt; x$2.measValue))(collection.this.Seq.canBuildFrom[String]);
  &lt;artifact&gt; val x$11: String = timeseries.timeseriesName;
  &lt;artifact&gt; val x$12: String = models.sosdata.TimeseriesData.apply$default$3;
  &lt;artifact&gt; val x$13: String = models.sosdata.TimeseriesData.apply$default$5;
  &lt;artifact&gt; val x$14: String = models.sosdata.TimeseriesData.apply$default$6;
  models.sosdata.TimeseriesData.apply(x$9, x$10, x$12, x$11, x$13, x$14)
}
        </td>
      </tr><tr>
        <td>
          136
        </td>
        <td>
          1294
        </td>
        <td>
          5997
          -
          5997
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td style="background: #F0ADAD">
          collection.this.Seq.canBuildFrom[String]
        </td>
      </tr><tr>
        <td>
          136
        </td>
        <td>
          1293
        </td>
        <td>
          5998
          -
          6008
        </td>
        <td>
          Select
        </td>
        <td>
          models.tvp.TimeValuePair.datetime
        </td>
        <td style="background: #F0ADAD">
          x$1.datetime
        </td>
      </tr><tr>
        <td>
          136
        </td>
        <td>
          1295
        </td>
        <td>
          5990
          -
          6009
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td style="background: #F0ADAD">
          tvp.map[String, Seq[String]](((x$1: models.tvp.TimeValuePair) =&gt; x$1.datetime))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          1297
        </td>
        <td>
          6040
          -
          6040
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.Seq.canBuildFrom
        </td>
        <td style="background: #F0ADAD">
          collection.this.Seq.canBuildFrom[String]
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          1296
        </td>
        <td>
          6041
          -
          6052
        </td>
        <td>
          Select
        </td>
        <td>
          models.tvp.TimeValuePair.measValue
        </td>
        <td style="background: #F0ADAD">
          x$2.measValue
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          1298
        </td>
        <td>
          6033
          -
          6053
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.collection.TraversableLike.map
        </td>
        <td style="background: #F0ADAD">
          tvp.map[String, Seq[String]](((x$2: models.tvp.TimeValuePair) =&gt; x$2.measValue))(collection.this.Seq.canBuildFrom[String])
        </td>
      </tr><tr>
        <td>
          138
        </td>
        <td>
          1299
        </td>
        <td>
          6080
          -
          6105
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.timeseriesName
        </td>
        <td style="background: #F0ADAD">
          timeseries.timeseriesName
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          1305
        </td>
        <td>
          6166
          -
          6177
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.SeqLike.isEmpty
        </td>
        <td style="background: #F0ADAD">
          tvp.isEmpty
        </td>
      </tr><tr>
        <td>
          142
        </td>
        <td>
          1306
        </td>
        <td>
          6201
          -
          6223
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.isEmpty
        </td>
        <td style="background: #F0ADAD">
          timeseries.uom.isEmpty
        </td>
      </tr><tr>
        <td>
          142
        </td>
        <td>
          1311
        </td>
        <td>
          6197
          -
          6367
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          if (timeseries.uom.isEmpty)
  timeseries.observedProperty
else
  timeseries.uom.getOrElse[String](&quot;empty&quot;)
        </td>
      </tr><tr>
        <td>
          143
        </td>
        <td>
          1308
        </td>
        <td>
          6245
          -
          6272
        </td>
        <td>
          Block
        </td>
        <td>
          models.sosdata.Timeseries.observedProperty
        </td>
        <td style="background: #F0ADAD">
          timeseries.observedProperty
        </td>
      </tr><tr>
        <td>
          143
        </td>
        <td>
          1307
        </td>
        <td>
          6245
          -
          6272
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.observedProperty
        </td>
        <td style="background: #F0ADAD">
          timeseries.observedProperty
        </td>
      </tr><tr>
        <td>
          145
        </td>
        <td>
          1309
        </td>
        <td>
          6316
          -
          6349
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          timeseries.uom.getOrElse[String](&quot;empty&quot;)
        </td>
      </tr><tr>
        <td>
          145
        </td>
        <td>
          1310
        </td>
        <td>
          6316
          -
          6349
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          timeseries.uom.getOrElse[String](&quot;empty&quot;)
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          1312
        </td>
        <td>
          6389
          -
          6406
        </td>
        <td>
          Select
        </td>
        <td>
          models.tvp.TimeValuePair.measUnit
        </td>
        <td style="background: #F0ADAD">
          tvp.head.measUnit
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          1313
        </td>
        <td>
          6389
          -
          6406
        </td>
        <td>
          Block
        </td>
        <td>
          models.tvp.TimeValuePair.measUnit
        </td>
        <td style="background: #F0ADAD">
          tvp.head.measUnit
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1315
        </td>
        <td>
          6475
          -
          6484
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](uom)
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1324
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$10
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$10
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1318
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$3
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$3
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1321
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$6
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$6
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1320
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$5
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$5
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1323
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$9
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$9
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1314
        </td>
        <td>
          6455
          -
          6467
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[models.sosdata.TimeseriesData](tsdata)
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1317
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$2
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$2
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1319
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$4
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$4
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1322
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$7
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$7
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1316
        </td>
        <td>
          6443
          -
          6443
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.copy$default$1
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy$default$1
        </td>
      </tr><tr>
        <td>
          148
        </td>
        <td>
          1325
        </td>
        <td>
          6432
          -
          6485
        </td>
        <td>
          Apply
        </td>
        <td>
          models.sosdata.Timeseries.copy
        </td>
        <td style="background: #F0ADAD">
          timeseries.copy(x$17, x$18, x$19, x$20, x$21, x$22, x$23, x$16, x$24, x$25, x$15)
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          1327
        </td>
        <td>
          6500
          -
          6500
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          1330
        </td>
        <td>
          6498
          -
          6526
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.Ok.apply[play.api.libs.json.JsValue](result.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          1329
        </td>
        <td>
          6521
          -
          6525
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          1326
        </td>
        <td>
          6501
          -
          6516
        </td>
        <td>
          Apply
        </td>
        <td>
          models.sosdata.Timeseries.toJson
        </td>
        <td style="background: #F0ADAD">
          result.toJson()
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          1328
        </td>
        <td>
          6500
          -
          6500
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          162
        </td>
        <td>
          1535
        </td>
        <td>
          6748
          -
          11931
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.ActionBuilder.async
        </td>
        <td style="background: #F0ADAD">
          play.api.mvc.Action.async[play.api.libs.json.JsValue](SosDataController.this.parse.json)(((request: play.api.mvc.Request[play.api.libs.json.JsValue]) =&gt; request.body.validate[models.sosdata.Timeseries](sosdata.this.Timeseries.reads).fold[scala.concurrent.Future[play.api.mvc.Result]](((errors: Seq[(play.api.libs.json.JsPath, Seq[play.api.data.validation.ValidationError])]) =&gt; {
  SosDataController.this.logger.error(play.api.libs.json.JsError.toJson(errors).toString());
  val error: models.ErrorResult = models.ErrorResult.apply(&quot;Error while validating request.&quot;, scala.Some.apply[String](play.api.libs.json.JsError.toJson(errors).toString()));
  scala.concurrent.Future.apply[play.api.mvc.Result](SosDataController.this.BadRequest.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON))(scala.concurrent.ExecutionContext.Implicits.global)
}), ((timeseries: models.sosdata.Timeseries) =&gt; {
  if (timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!))
    {
      SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
      val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;&quot;)), scala.None);
      SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    }
  else
    ();
  val capabilitiesFuture: scala.concurrent.Future[Either[models.ErrorResult,models.sosdata.SosCapabilities]] = SosDataController.this.retrieveSosCapabilities(timeseries.sosUrl);
  capabilitiesFuture.recover[Object](({
    @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
      def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
        $anonfun.super.&lt;init&gt;();
        ()
      };
      final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x2: A1, default: A1 =&gt; B1): B1 = ((x2.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; {
          SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e);
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
        case (defaultCase$ @ _) =&gt; default.apply(x2)
      };
      final def isDefinedAt(x2: Throwable): Boolean = ((x2.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; true
        case (defaultCase$ @ _) =&gt; false
      }
    };
    new $anonfun()
  }: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global);
  val sosXmlRequest: String = SosDataController.this.getObservationRequestXml(timeseries, &quot;http://www.opengis.net/waterml/2.0&quot;);
  val responseFuture: scala.concurrent.Future[play.api.libs.ws.WSResponse] = SosDataController.this.wsClient.url(timeseries.sosUrl).withHeaders(scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)).post[String](sosXmlRequest)(http.this.Writeable.wString(mvc.this.Codec.utf_8));
  responseFuture.recover[Object](({
    @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
      def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
        $anonfun.super.&lt;init&gt;();
        ()
      };
      final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x3: A1, default: A1 =&gt; B1): B1 = ((x3.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; {
          SosDataController.this.logger.error(&quot;Sos GetObservation threw exception&quot;, e);
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
        case (defaultCase$ @ _) =&gt; default.apply(x3)
      };
      final def isDefinedAt(x3: Throwable): Boolean = ((x3.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; true
        case (defaultCase$ @ _) =&gt; false
      }
    };
    new $anonfun()
  }: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global);
  val combinedFuture: scala.concurrent.Future[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)] = capabilitiesFuture.flatMap[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)](((capaResult: Either[models.ErrorResult,models.sosdata.SosCapabilities]) =&gt; responseFuture.map[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)](((sosDataResult: play.api.libs.ws.WSResponse) =&gt; scala.Tuple2.apply[Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse](capaResult, sosDataResult)))(scala.concurrent.ExecutionContext.Implicits.global)))(scala.concurrent.ExecutionContext.Implicits.global);
  combinedFuture.map[play.api.mvc.Result](((combinedResponse: (Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)) =&gt; {
    val response: play.api.libs.ws.WSResponse = combinedResponse._2;
    if (response.status.!=(200))
      {
        SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status));
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
    else
      if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
        {
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
      else
        combinedResponse._1 match {
          case (b: models.sosdata.SosCapabilities)scala.util.Right[models.ErrorResult,models.sosdata.SosCapabilities]((sosCapabilities @ _)) =&gt; {
            SosDataController.this.logger.debug(scala.StringContext.apply(&quot;sosCapabilities &quot;, &quot;&quot;).s(sosCapabilities.responseFormats));
            if (sosCapabilities.responseFormats.isDefined.&amp;&amp;(sosCapabilities.responseFormats.get.contains[String](&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!))
              {
                SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
                val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.None);
                SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
              }
            else
              ();
            val wml2: Option[scala.xml.NodeSeq] = SosDataController.this.wml2Exporter.getWml2ExportFromSosGetObs(response.body, sosCapabilities, sosXmlRequest);
            if (wml2.isEmpty)
              {
                SosDataController.this.logger.error(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;);
                val error: models.ErrorResult = models.ErrorResult.apply(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;, scala.Some.apply[String](response.body));
                SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
              }
            else
              {
                val updatedTime: java.time.OffsetDateTime = java.time.OffsetDateTime.now(java.time.ZoneId.of(SosDataController.this.appTimeZone));
                val fileName: String = &quot;export-&quot;.+(scala.util.Try.apply[String](java.net.URLEncoder.encode(sosCapabilities.title.replace(&quot; &quot;, &quot;_&quot;), &quot;UTF-8&quot;).+(&quot;-&quot;).+(updatedTime.format(SosDataController.this.formatter))).getOrElse[String](&quot;-sosdata&quot;)).+(&quot;.wml&quot;);
                SosDataController.this.Ok.apply[scala.xml.NodeSeq](wml2.get)(http.this.Writeable.writeableOf_NodeSeq[scala.xml.NodeSeq](mvc.this.Codec.utf_8)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Content-disposition&quot;).-&gt;[String](scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName))).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;Content-disposition&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;x-filename&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;x-filename&quot;).-&gt;[String](fileName))
              }
          }
          case (a: models.ErrorResult)scala.util.Left[models.ErrorResult,models.sosdata.SosCapabilities]((errorResult @ _)) =&gt; SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
  }))(scala.concurrent.ExecutionContext.Implicits.global)
}))))
        </td>
      </tr><tr>
        <td>
          162
        </td>
        <td>
          1337
        </td>
        <td>
          6761
          -
          6771
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.BodyParsers.parse.json
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.parse.json
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          1338
        </td>
        <td>
          6811
          -
          6811
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.reads
        </td>
        <td style="background: #F0ADAD">
          sosdata.this.Timeseries.reads
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          1534
        </td>
        <td>
          6790
          -
          11927
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.libs.json.JsResult.fold
        </td>
        <td style="background: #F0ADAD">
          request.body.validate[models.sosdata.Timeseries](sosdata.this.Timeseries.reads).fold[scala.concurrent.Future[play.api.mvc.Result]](((errors: Seq[(play.api.libs.json.JsPath, Seq[play.api.data.validation.ValidationError])]) =&gt; {
  SosDataController.this.logger.error(play.api.libs.json.JsError.toJson(errors).toString());
  val error: models.ErrorResult = models.ErrorResult.apply(&quot;Error while validating request.&quot;, scala.Some.apply[String](play.api.libs.json.JsError.toJson(errors).toString()));
  scala.concurrent.Future.apply[play.api.mvc.Result](SosDataController.this.BadRequest.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON))(scala.concurrent.ExecutionContext.Implicits.global)
}), ((timeseries: models.sosdata.Timeseries) =&gt; {
  if (timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!))
    {
      SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
      val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;&quot;)), scala.None);
      SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    }
  else
    ();
  val capabilitiesFuture: scala.concurrent.Future[Either[models.ErrorResult,models.sosdata.SosCapabilities]] = SosDataController.this.retrieveSosCapabilities(timeseries.sosUrl);
  capabilitiesFuture.recover[Object](({
    @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
      def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
        $anonfun.super.&lt;init&gt;();
        ()
      };
      final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x2: A1, default: A1 =&gt; B1): B1 = ((x2.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; {
          SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e);
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
        case (defaultCase$ @ _) =&gt; default.apply(x2)
      };
      final def isDefinedAt(x2: Throwable): Boolean = ((x2.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; true
        case (defaultCase$ @ _) =&gt; false
      }
    };
    new $anonfun()
  }: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global);
  val sosXmlRequest: String = SosDataController.this.getObservationRequestXml(timeseries, &quot;http://www.opengis.net/waterml/2.0&quot;);
  val responseFuture: scala.concurrent.Future[play.api.libs.ws.WSResponse] = SosDataController.this.wsClient.url(timeseries.sosUrl).withHeaders(scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)).post[String](sosXmlRequest)(http.this.Writeable.wString(mvc.this.Codec.utf_8));
  responseFuture.recover[Object](({
    @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
      def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
        $anonfun.super.&lt;init&gt;();
        ()
      };
      final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x3: A1, default: A1 =&gt; B1): B1 = ((x3.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; {
          SosDataController.this.logger.error(&quot;Sos GetObservation threw exception&quot;, e);
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
        case (defaultCase$ @ _) =&gt; default.apply(x3)
      };
      final def isDefinedAt(x3: Throwable): Boolean = ((x3.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; true
        case (defaultCase$ @ _) =&gt; false
      }
    };
    new $anonfun()
  }: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global);
  val combinedFuture: scala.concurrent.Future[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)] = capabilitiesFuture.flatMap[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)](((capaResult: Either[models.ErrorResult,models.sosdata.SosCapabilities]) =&gt; responseFuture.map[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)](((sosDataResult: play.api.libs.ws.WSResponse) =&gt; scala.Tuple2.apply[Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse](capaResult, sosDataResult)))(scala.concurrent.ExecutionContext.Implicits.global)))(scala.concurrent.ExecutionContext.Implicits.global);
  combinedFuture.map[play.api.mvc.Result](((combinedResponse: (Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)) =&gt; {
    val response: play.api.libs.ws.WSResponse = combinedResponse._2;
    if (response.status.!=(200))
      {
        SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status));
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
    else
      if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
        {
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
      else
        combinedResponse._1 match {
          case (b: models.sosdata.SosCapabilities)scala.util.Right[models.ErrorResult,models.sosdata.SosCapabilities]((sosCapabilities @ _)) =&gt; {
            SosDataController.this.logger.debug(scala.StringContext.apply(&quot;sosCapabilities &quot;, &quot;&quot;).s(sosCapabilities.responseFormats));
            if (sosCapabilities.responseFormats.isDefined.&amp;&amp;(sosCapabilities.responseFormats.get.contains[String](&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!))
              {
                SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
                val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.None);
                SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
              }
            else
              ();
            val wml2: Option[scala.xml.NodeSeq] = SosDataController.this.wml2Exporter.getWml2ExportFromSosGetObs(response.body, sosCapabilities, sosXmlRequest);
            if (wml2.isEmpty)
              {
                SosDataController.this.logger.error(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;);
                val error: models.ErrorResult = models.ErrorResult.apply(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;, scala.Some.apply[String](response.body));
                SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
              }
            else
              {
                val updatedTime: java.time.OffsetDateTime = java.time.OffsetDateTime.now(java.time.ZoneId.of(SosDataController.this.appTimeZone));
                val fileName: String = &quot;export-&quot;.+(scala.util.Try.apply[String](java.net.URLEncoder.encode(sosCapabilities.title.replace(&quot; &quot;, &quot;_&quot;), &quot;UTF-8&quot;).+(&quot;-&quot;).+(updatedTime.format(SosDataController.this.formatter))).getOrElse[String](&quot;-sosdata&quot;)).+(&quot;.wml&quot;);
                SosDataController.this.Ok.apply[scala.xml.NodeSeq](wml2.get)(http.this.Writeable.writeableOf_NodeSeq[scala.xml.NodeSeq](mvc.this.Codec.utf_8)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Content-disposition&quot;).-&gt;[String](scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName))).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;Content-disposition&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;x-filename&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;x-filename&quot;).-&gt;[String](fileName))
              }
          }
          case (a: models.ErrorResult)scala.util.Left[models.ErrorResult,models.sosdata.SosCapabilities]((errorResult @ _)) =&gt; SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
  }))(scala.concurrent.ExecutionContext.Implicits.global)
}))
        </td>
      </tr><tr>
        <td>
          165
        </td>
        <td>
          1339
        </td>
        <td>
          6869
          -
          6902
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.libs.json.JsValue.toString
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.JsError.toJson(errors).toString()
        </td>
      </tr><tr>
        <td>
          165
        </td>
        <td>
          1340
        </td>
        <td>
          6856
          -
          6903
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(play.api.libs.json.JsError.toJson(errors).toString())
        </td>
      </tr><tr>
        <td>
          166
        </td>
        <td>
          1342
        </td>
        <td>
          6976
          -
          7007
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.libs.json.JsValue.toString
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.JsError.toJson(errors).toString()
        </td>
      </tr><tr>
        <td>
          166
        </td>
        <td>
          1341
        </td>
        <td>
          6936
          -
          6969
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Error while validating request.&quot;
        </td>
      </tr><tr>
        <td>
          166
        </td>
        <td>
          1344
        </td>
        <td>
          6924
          -
          7009
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(&quot;Error while validating request.&quot;, scala.Some.apply[String](play.api.libs.json.JsError.toJson(errors).toString()))
        </td>
      </tr><tr>
        <td>
          166
        </td>
        <td>
          1343
        </td>
        <td>
          6971
          -
          7008
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](play.api.libs.json.JsError.toJson(errors).toString())
        </td>
      </tr><tr>
        <td>
          167
        </td>
        <td>
          1351
        </td>
        <td>
          7018
          -
          7086
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.apply
        </td>
        <td style="background: #F0ADAD">
          scala.concurrent.Future.apply[play.api.mvc.Result](SosDataController.this.BadRequest.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          168
        </td>
        <td>
          1345
        </td>
        <td>
          7059
          -
          7059
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          168
        </td>
        <td>
          1348
        </td>
        <td>
          7047
          -
          7047
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          168
        </td>
        <td>
          1347
        </td>
        <td>
          7047
          -
          7047
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          168
        </td>
        <td>
          1350
        </td>
        <td>
          7037
          -
          7076
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.BadRequest.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          168
        </td>
        <td>
          1346
        </td>
        <td>
          7048
          -
          7066
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          168
        </td>
        <td>
          1349
        </td>
        <td>
          7071
          -
          7075
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          1354
        </td>
        <td>
          7132
          -
          7256
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.isDefined.&amp;&amp;(timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!)
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          1372
        </td>
        <td>
          7258
          -
          7630
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
  val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;&quot;)), scala.None);
  SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          1374
        </td>
        <td>
          7128
          -
          7128
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          1353
        </td>
        <td>
          7171
          -
          7256
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.get.equalsIgnoreCase(&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          1352
        </td>
        <td>
          7219
          -
          7255
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;http://www.opengis.net/waterml/2.0&quot;
        </td>
      </tr><tr>
        <td>
          174
        </td>
        <td>
          1373
        </td>
        <td>
          7128
          -
          7128
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          1357
        </td>
        <td>
          7351
          -
          7394
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.getOrElse[String](&quot;none&quot;)
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          1356
        </td>
        <td>
          7395
          -
          7396
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          1359
        </td>
        <td>
          7270
          -
          7397
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)))
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          1355
        </td>
        <td>
          7285
          -
          7350
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetObservation responseFormat unsupported for this request; &quot;
        </td>
      </tr><tr>
        <td>
          175
        </td>
        <td>
          1358
        </td>
        <td>
          7283
          -
          7396
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;))
        </td>
      </tr><tr>
        <td>
          176
        </td>
        <td>
          1365
        </td>
        <td>
          7420
          -
          7561
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;&quot;)), scala.None)
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          1360
        </td>
        <td>
          7447
          -
          7512
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetObservation responseFormat unsupported for this request; &quot;
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          1363
        </td>
        <td>
          7445
          -
          7554
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetObservation responseFormat unsupported for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;&quot;))
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          1362
        </td>
        <td>
          7513
          -
          7552
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.getOrElse[String](&quot;&quot;)
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          1361
        </td>
        <td>
          7553
          -
          7554
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          1364
        </td>
        <td>
          7556
          -
          7560
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          1366
        </td>
        <td>
          7603
          -
          7603
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          1369
        </td>
        <td>
          7591
          -
          7591
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          1368
        </td>
        <td>
          7591
          -
          7591
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          1371
        </td>
        <td>
          7572
          -
          7620
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          1370
        </td>
        <td>
          7615
          -
          7619
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          1367
        </td>
        <td>
          7592
          -
          7610
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          181
        </td>
        <td>
          1375
        </td>
        <td>
          7689
          -
          7706
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.sosUrl
        </td>
        <td style="background: #F0ADAD">
          timeseries.sosUrl
        </td>
      </tr><tr>
        <td>
          181
        </td>
        <td>
          1376
        </td>
        <td>
          7665
          -
          7707
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.retrieveSosCapabilities
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.retrieveSosCapabilities(timeseries.sosUrl)
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          1392
        </td>
        <td>
          7756
          -
          8096
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.recover
        </td>
        <td style="background: #F0ADAD">
          capabilitiesFuture.recover[Object](({
  @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
    def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
      $anonfun.super.&lt;init&gt;();
      ()
    };
    final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x2: A1, default: A1 =&gt; B1): B1 = ((x2.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; {
        SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e);
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
      case (defaultCase$ @ _) =&gt; default.apply(x2)
    };
    final def isDefinedAt(x2: Throwable): Boolean = ((x2.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; true
      case (defaultCase$ @ _) =&gt; false
    }
  };
  new $anonfun()
}: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          184
        </td>
        <td>
          1391
        </td>
        <td>
          7783
          -
          7783
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.$anonfun.&lt;init&gt;
        </td>
        <td style="background: #F0ADAD">
          new $anonfun()
        </td>
      </tr><tr>
        <td>
          186
        </td>
        <td>
          1377
        </td>
        <td>
          7828
          -
          7883
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e)
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          1384
        </td>
        <td>
          7908
          -
          8025
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()))
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          1378
        </td>
        <td>
          7922
          -
          7934
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Exception (&quot;
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          1381
        </td>
        <td>
          7920
          -
          7990
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName())
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          1380
        </td>
        <td>
          7935
          -
          7962
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Class.getCanonicalName
        </td>
        <td style="background: #F0ADAD">
          e.getClass().getCanonicalName()
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          1379
        </td>
        <td>
          7963
          -
          7990
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;) on SOS get capabilities.&quot;
        </td>
      </tr><tr>
        <td>
          188
        </td>
        <td>
          1383
        </td>
        <td>
          8006
          -
          8024
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](e.getMessage())
        </td>
      </tr><tr>
        <td>
          188
        </td>
        <td>
          1382
        </td>
        <td>
          8011
          -
          8023
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Throwable.getMessage
        </td>
        <td style="background: #F0ADAD">
          e.getMessage()
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          1387
        </td>
        <td>
          8057
          -
          8057
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          1390
        </td>
        <td>
          8038
          -
          8086
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          1389
        </td>
        <td>
          8081
          -
          8085
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          1386
        </td>
        <td>
          8058
          -
          8076
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          1388
        </td>
        <td>
          8057
          -
          8057
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          1385
        </td>
        <td>
          8069
          -
          8069
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          192
        </td>
        <td>
          1393
        </td>
        <td>
          8126
          -
          8200
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.getObservationRequestXml
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.getObservationRequestXml(timeseries, &quot;http://www.opengis.net/waterml/2.0&quot;)
        </td>
      </tr><tr>
        <td>
          193
        </td>
        <td>
          1394
        </td>
        <td>
          8243
          -
          8260
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.sosUrl
        </td>
        <td style="background: #F0ADAD">
          timeseries.sosUrl
        </td>
      </tr><tr>
        <td>
          194
        </td>
        <td>
          1395
        </td>
        <td>
          8285
          -
          8318
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.ArrowAssoc.-&gt;
        </td>
        <td style="background: #F0ADAD">
          scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          1396
        </td>
        <td>
          8335
          -
          8335
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          1398
        </td>
        <td>
          8230
          -
          8350
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.ws.WSRequest.post
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.wsClient.url(timeseries.sosUrl).withHeaders(scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)).post[String](sosXmlRequest)(http.this.Writeable.wString(mvc.this.Codec.utf_8))
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          1397
        </td>
        <td>
          8335
          -
          8335
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.wString
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.wString(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          197
        </td>
        <td>
          1414
        </td>
        <td>
          8360
          -
          8694
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.recover
        </td>
        <td style="background: #F0ADAD">
          responseFuture.recover[Object](({
  @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
    def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
      $anonfun.super.&lt;init&gt;();
      ()
    };
    final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x3: A1, default: A1 =&gt; B1): B1 = ((x3.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; {
        SosDataController.this.logger.error(&quot;Sos GetObservation threw exception&quot;, e);
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
      case (defaultCase$ @ _) =&gt; default.apply(x3)
    };
    final def isDefinedAt(x3: Throwable): Boolean = ((x3.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; true
      case (defaultCase$ @ _) =&gt; false
    }
  };
  new $anonfun()
}: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          197
        </td>
        <td>
          1413
        </td>
        <td>
          8383
          -
          8383
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.$anonfun.&lt;init&gt;
        </td>
        <td style="background: #F0ADAD">
          new $anonfun()
        </td>
      </tr><tr>
        <td>
          199
        </td>
        <td>
          1399
        </td>
        <td>
          8428
          -
          8481
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(&quot;Sos GetObservation threw exception&quot;, e)
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          1402
        </td>
        <td>
          8533
          -
          8560
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Class.getCanonicalName
        </td>
        <td style="background: #F0ADAD">
          e.getClass().getCanonicalName()
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          1401
        </td>
        <td>
          8561
          -
          8588
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;) on SOS get capabilities.&quot;
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          1403
        </td>
        <td>
          8518
          -
          8588
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName())
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          1406
        </td>
        <td>
          8506
          -
          8623
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()))
        </td>
      </tr><tr>
        <td>
          200
        </td>
        <td>
          1400
        </td>
        <td>
          8520
          -
          8532
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Exception (&quot;
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          1405
        </td>
        <td>
          8604
          -
          8622
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](e.getMessage())
        </td>
      </tr><tr>
        <td>
          201
        </td>
        <td>
          1404
        </td>
        <td>
          8609
          -
          8621
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Throwable.getMessage
        </td>
        <td style="background: #F0ADAD">
          e.getMessage()
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          1411
        </td>
        <td>
          8679
          -
          8683
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          1408
        </td>
        <td>
          8656
          -
          8674
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          1407
        </td>
        <td>
          8667
          -
          8667
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          1410
        </td>
        <td>
          8655
          -
          8655
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          1412
        </td>
        <td>
          8636
          -
          8684
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          1409
        </td>
        <td>
          8655
          -
          8655
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          206
        </td>
        <td>
          1417
        </td>
        <td>
          8785
          -
          8919
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.flatMap
        </td>
        <td style="background: #F0ADAD">
          capabilitiesFuture.flatMap[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)](((capaResult: Either[models.ErrorResult,models.sosdata.SosCapabilities]) =&gt; responseFuture.map[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)](((sosDataResult: play.api.libs.ws.WSResponse) =&gt; scala.Tuple2.apply[Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse](capaResult, sosDataResult)))(scala.concurrent.ExecutionContext.Implicits.global)))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          207
        </td>
        <td>
          1416
        </td>
        <td>
          8844
          -
          8919
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.map
        </td>
        <td style="background: #F0ADAD">
          responseFuture.map[(Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)](((sosDataResult: play.api.libs.ws.WSResponse) =&gt; scala.Tuple2.apply[Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse](capaResult, sosDataResult)))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          208
        </td>
        <td>
          1415
        </td>
        <td>
          8892
          -
          8919
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Tuple2.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Tuple2.apply[Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse](capaResult, sosDataResult)
        </td>
      </tr><tr>
        <td>
          210
        </td>
        <td>
          1533
        </td>
        <td>
          8929
          -
          11913
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.map
        </td>
        <td style="background: #F0ADAD">
          combinedFuture.map[play.api.mvc.Result](((combinedResponse: (Either[models.ErrorResult,models.sosdata.SosCapabilities], play.api.libs.ws.WSResponse)) =&gt; {
  val response: play.api.libs.ws.WSResponse = combinedResponse._2;
  if (response.status.!=(200))
    {
      SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status));
      val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body));
      SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    }
  else
    if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
      {
        SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
    else
      combinedResponse._1 match {
        case (b: models.sosdata.SosCapabilities)scala.util.Right[models.ErrorResult,models.sosdata.SosCapabilities]((sosCapabilities @ _)) =&gt; {
          SosDataController.this.logger.debug(scala.StringContext.apply(&quot;sosCapabilities &quot;, &quot;&quot;).s(sosCapabilities.responseFormats));
          if (sosCapabilities.responseFormats.isDefined.&amp;&amp;(sosCapabilities.responseFormats.get.contains[String](&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!))
            {
              SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
              val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.None);
              SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
            }
          else
            ();
          val wml2: Option[scala.xml.NodeSeq] = SosDataController.this.wml2Exporter.getWml2ExportFromSosGetObs(response.body, sosCapabilities, sosXmlRequest);
          if (wml2.isEmpty)
            {
              SosDataController.this.logger.error(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;);
              val error: models.ErrorResult = models.ErrorResult.apply(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;, scala.Some.apply[String](response.body));
              SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
            }
          else
            {
              val updatedTime: java.time.OffsetDateTime = java.time.OffsetDateTime.now(java.time.ZoneId.of(SosDataController.this.appTimeZone));
              val fileName: String = &quot;export-&quot;.+(scala.util.Try.apply[String](java.net.URLEncoder.encode(sosCapabilities.title.replace(&quot; &quot;, &quot;_&quot;), &quot;UTF-8&quot;).+(&quot;-&quot;).+(updatedTime.format(SosDataController.this.formatter))).getOrElse[String](&quot;-sosdata&quot;)).+(&quot;.wml&quot;);
              SosDataController.this.Ok.apply[scala.xml.NodeSeq](wml2.get)(http.this.Writeable.writeableOf_NodeSeq[scala.xml.NodeSeq](mvc.this.Codec.utf_8)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Content-disposition&quot;).-&gt;[String](scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName))).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;Content-disposition&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;x-filename&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;x-filename&quot;).-&gt;[String](fileName))
            }
        }
        case (a: models.ErrorResult)scala.util.Left[models.ErrorResult,models.sosdata.SosCapabilities]((errorResult @ _)) =&gt; SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
}))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          212
        </td>
        <td>
          1418
        </td>
        <td>
          8996
          -
          9015
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td style="background: #F0ADAD">
          combinedResponse._2
        </td>
      </tr><tr>
        <td>
          214
        </td>
        <td>
          1419
        </td>
        <td>
          9031
          -
          9053
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.!=
        </td>
        <td style="background: #F0ADAD">
          response.status.!=(200)
        </td>
      </tr><tr>
        <td>
          214
        </td>
        <td>
          1442
        </td>
        <td>
          9055
          -
          9402
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status));
  val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body));
  SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          1420
        </td>
        <td>
          9084
          -
          9097
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Calling SOS &quot;
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          1423
        </td>
        <td>
          9098
          -
          9115
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.sosUrl
        </td>
        <td style="background: #F0ADAD">
          timeseries.sosUrl
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          1425
        </td>
        <td>
          9082
          -
          9173
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status)
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          1422
        </td>
        <td>
          9154
          -
          9173
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; on GetObservation&quot;
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          1421
        </td>
        <td>
          9116
          -
          9137
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; HTTP result status &quot;
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          1424
        </td>
        <td>
          9138
          -
          9153
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.status
        </td>
        <td style="background: #F0ADAD">
          response.status
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          1426
        </td>
        <td>
          9069
          -
          9174
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status))
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          1429
        </td>
        <td>
          9274
          -
          9293
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; on GetObservation&quot;
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          1432
        </td>
        <td>
          9211
          -
          9293
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status)
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          1428
        </td>
        <td>
          9240
          -
          9257
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; responded with &quot;
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          1431
        </td>
        <td>
          9258
          -
          9273
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.status
        </td>
        <td style="background: #F0ADAD">
          response.status
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          1430
        </td>
        <td>
          9222
          -
          9239
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.sosUrl
        </td>
        <td style="background: #F0ADAD">
          timeseries.sosUrl
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          1427
        </td>
        <td>
          9213
          -
          9221
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Server &quot;
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          1435
        </td>
        <td>
          9199
          -
          9329
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetObservation&quot;).s(timeseries.sosUrl, response.status), scala.Some.apply[String](response.body))
        </td>
      </tr><tr>
        <td>
          217
        </td>
        <td>
          1434
        </td>
        <td>
          9309
          -
          9328
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](response.body)
        </td>
      </tr><tr>
        <td>
          217
        </td>
        <td>
          1433
        </td>
        <td>
          9314
          -
          9327
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          1438
        </td>
        <td>
          9361
          -
          9361
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          1441
        </td>
        <td>
          9342
          -
          9390
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          1440
        </td>
        <td>
          9385
          -
          9389
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          1437
        </td>
        <td>
          9362
          -
          9380
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          1439
        </td>
        <td>
          9361
          -
          9361
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          1436
        </td>
        <td>
          9373
          -
          9373
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          220
        </td>
        <td>
          1443
        </td>
        <td>
          9439
          -
          9453
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          220
        </td>
        <td>
          1532
        </td>
        <td>
          9418
          -
          11902
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
  {
    SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
    val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
    SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
  }
else
  combinedResponse._1 match {
    case (b: models.sosdata.SosCapabilities)scala.util.Right[models.ErrorResult,models.sosdata.SosCapabilities]((sosCapabilities @ _)) =&gt; {
      SosDataController.this.logger.debug(scala.StringContext.apply(&quot;sosCapabilities &quot;, &quot;&quot;).s(sosCapabilities.responseFormats));
      if (sosCapabilities.responseFormats.isDefined.&amp;&amp;(sosCapabilities.responseFormats.get.contains[String](&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!))
        {
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.None);
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
      else
        ();
      val wml2: Option[scala.xml.NodeSeq] = SosDataController.this.wml2Exporter.getWml2ExportFromSosGetObs(response.body, sosCapabilities, sosXmlRequest);
      if (wml2.isEmpty)
        {
          SosDataController.this.logger.error(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;);
          val error: models.ErrorResult = models.ErrorResult.apply(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;, scala.Some.apply[String](response.body));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
      else
        {
          val updatedTime: java.time.OffsetDateTime = java.time.OffsetDateTime.now(java.time.ZoneId.of(SosDataController.this.appTimeZone));
          val fileName: String = &quot;export-&quot;.+(scala.util.Try.apply[String](java.net.URLEncoder.encode(sosCapabilities.title.replace(&quot; &quot;, &quot;_&quot;), &quot;UTF-8&quot;).+(&quot;-&quot;).+(updatedTime.format(SosDataController.this.formatter))).getOrElse[String](&quot;-sosdata&quot;)).+(&quot;.wml&quot;);
          SosDataController.this.Ok.apply[scala.xml.NodeSeq](wml2.get)(http.this.Writeable.writeableOf_NodeSeq[scala.xml.NodeSeq](mvc.this.Codec.utf_8)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Content-disposition&quot;).-&gt;[String](scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName))).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;Content-disposition&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;x-filename&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;x-filename&quot;).-&gt;[String](fileName))
        }
    }
    case (a: models.ErrorResult)scala.util.Left[models.ErrorResult,models.sosdata.SosCapabilities]((errorResult @ _)) =&gt; SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
  }
        </td>
      </tr><tr>
        <td>
          220
        </td>
        <td>
          1466
        </td>
        <td>
          9488
          -
          9843
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
  val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body));
  SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          220
        </td>
        <td>
          1445
        </td>
        <td>
          9422
          -
          9486
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!
        </td>
      </tr><tr>
        <td>
          220
        </td>
        <td>
          1444
        </td>
        <td>
          9468
          -
          9485
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;application/xml&quot;
        </td>
      </tr><tr>
        <td>
          221
        </td>
        <td>
          1447
        </td>
        <td>
          9597
          -
          9598
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          221
        </td>
        <td>
          1450
        </td>
        <td>
          9515
          -
          9598
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get)
        </td>
      </tr><tr>
        <td>
          221
        </td>
        <td>
          1449
        </td>
        <td>
          9561
          -
          9596
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.get
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get
        </td>
      </tr><tr>
        <td>
          221
        </td>
        <td>
          1446
        </td>
        <td>
          9517
          -
          9560
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetObservation result was not XML but &quot;
        </td>
      </tr><tr>
        <td>
          221
        </td>
        <td>
          1448
        </td>
        <td>
          9577
          -
          9591
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          221
        </td>
        <td>
          1451
        </td>
        <td>
          9502
          -
          9599
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get))
        </td>
      </tr><tr>
        <td>
          222
        </td>
        <td>
          1459
        </td>
        <td>
          9624
          -
          9770
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body))
        </td>
      </tr><tr>
        <td>
          223
        </td>
        <td>
          1456
        </td>
        <td>
          9651
          -
          9734
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetObservation result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get)
        </td>
      </tr><tr>
        <td>
          223
        </td>
        <td>
          1452
        </td>
        <td>
          9653
          -
          9696
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetObservation result was not XML but &quot;
        </td>
      </tr><tr>
        <td>
          223
        </td>
        <td>
          1455
        </td>
        <td>
          9697
          -
          9732
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.get
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get
        </td>
      </tr><tr>
        <td>
          223
        </td>
        <td>
          1454
        </td>
        <td>
          9713
          -
          9727
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          223
        </td>
        <td>
          1453
        </td>
        <td>
          9733
          -
          9734
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          224
        </td>
        <td>
          1458
        </td>
        <td>
          9750
          -
          9769
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](response.body)
        </td>
      </tr><tr>
        <td>
          224
        </td>
        <td>
          1457
        </td>
        <td>
          9755
          -
          9768
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          225
        </td>
        <td>
          1465
        </td>
        <td>
          9783
          -
          9831
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          225
        </td>
        <td>
          1461
        </td>
        <td>
          9803
          -
          9821
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          225
        </td>
        <td>
          1464
        </td>
        <td>
          9826
          -
          9830
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          225
        </td>
        <td>
          1463
        </td>
        <td>
          9802
          -
          9802
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          225
        </td>
        <td>
          1460
        </td>
        <td>
          9814
          -
          9814
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          225
        </td>
        <td>
          1462
        </td>
        <td>
          9802
          -
          9802
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          229
        </td>
        <td>
          1467
        </td>
        <td>
          9917
          -
          9936
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td style="background: #F0ADAD">
          combinedResponse._1
        </td>
      </tr><tr>
        <td>
          229
        </td>
        <td>
          1531
        </td>
        <td>
          9917
          -
          11890
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          combinedResponse._1 match {
  case (b: models.sosdata.SosCapabilities)scala.util.Right[models.ErrorResult,models.sosdata.SosCapabilities]((sosCapabilities @ _)) =&gt; {
    SosDataController.this.logger.debug(scala.StringContext.apply(&quot;sosCapabilities &quot;, &quot;&quot;).s(sosCapabilities.responseFormats));
    if (sosCapabilities.responseFormats.isDefined.&amp;&amp;(sosCapabilities.responseFormats.get.contains[String](&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!))
      {
        SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.None);
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
    else
      ();
    val wml2: Option[scala.xml.NodeSeq] = SosDataController.this.wml2Exporter.getWml2ExportFromSosGetObs(response.body, sosCapabilities, sosXmlRequest);
    if (wml2.isEmpty)
      {
        SosDataController.this.logger.error(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;);
        val error: models.ErrorResult = models.ErrorResult.apply(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;, scala.Some.apply[String](response.body));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
    else
      {
        val updatedTime: java.time.OffsetDateTime = java.time.OffsetDateTime.now(java.time.ZoneId.of(SosDataController.this.appTimeZone));
        val fileName: String = &quot;export-&quot;.+(scala.util.Try.apply[String](java.net.URLEncoder.encode(sosCapabilities.title.replace(&quot; &quot;, &quot;_&quot;), &quot;UTF-8&quot;).+(&quot;-&quot;).+(updatedTime.format(SosDataController.this.formatter))).getOrElse[String](&quot;-sosdata&quot;)).+(&quot;.wml&quot;);
        SosDataController.this.Ok.apply[scala.xml.NodeSeq](wml2.get)(http.this.Writeable.writeableOf_NodeSeq[scala.xml.NodeSeq](mvc.this.Codec.utf_8)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Content-disposition&quot;).-&gt;[String](scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName))).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;Content-disposition&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;x-filename&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;x-filename&quot;).-&gt;[String](fileName))
      }
  }
  case (a: models.ErrorResult)scala.util.Left[models.ErrorResult,models.sosdata.SosCapabilities]((errorResult @ _)) =&gt; SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          1468
        </td>
        <td>
          10021
          -
          10038
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;sosCapabilities &quot;
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          1470
        </td>
        <td>
          10039
          -
          10070
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.SosCapabilities.responseFormats
        </td>
        <td style="background: #F0ADAD">
          sosCapabilities.responseFormats
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          1472
        </td>
        <td>
          10006
          -
          10073
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.debug
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.debug(scala.StringContext.apply(&quot;sosCapabilities &quot;, &quot;&quot;).s(sosCapabilities.responseFormats))
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          1469
        </td>
        <td>
          10071
          -
          10072
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          231
        </td>
        <td>
          1471
        </td>
        <td>
          10019
          -
          10072
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;sosCapabilities &quot;, &quot;&quot;).s(sosCapabilities.responseFormats)
        </td>
      </tr><tr>
        <td>
          232
        </td>
        <td>
          1474
        </td>
        <td>
          10139
          -
          10222
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #F0ADAD">
          sosCapabilities.responseFormats.get.contains[String](&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!
        </td>
      </tr><tr>
        <td>
          232
        </td>
        <td>
          1494
        </td>
        <td>
          10090
          -
          10090
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          232
        </td>
        <td>
          1473
        </td>
        <td>
          10185
          -
          10221
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;http://www.opengis.net/waterml/2.0&quot;
        </td>
      </tr><tr>
        <td>
          232
        </td>
        <td>
          1493
        </td>
        <td>
          10224
          -
          10634
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)));
  val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.None);
  SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          232
        </td>
        <td>
          1475
        </td>
        <td>
          10094
          -
          10222
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td style="background: #F0ADAD">
          sosCapabilities.responseFormats.isDefined.&amp;&amp;(sosCapabilities.responseFormats.get.contains[String](&quot;http://www.opengis.net/waterml/2.0&quot;).unary_!)
        </td>
      </tr><tr>
        <td>
          232
        </td>
        <td>
          1495
        </td>
        <td>
          10090
          -
          10090
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          233
        </td>
        <td>
          1476
        </td>
        <td>
          10259
          -
          10321
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS Server does not support responseFormat for this request; &quot;
        </td>
      </tr><tr>
        <td>
          233
        </td>
        <td>
          1479
        </td>
        <td>
          10257
          -
          10367
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;))
        </td>
      </tr><tr>
        <td>
          233
        </td>
        <td>
          1478
        </td>
        <td>
          10322
          -
          10365
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.getOrElse[String](&quot;none&quot;)
        </td>
      </tr><tr>
        <td>
          233
        </td>
        <td>
          1477
        </td>
        <td>
          10366
          -
          10367
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          233
        </td>
        <td>
          1480
        </td>
        <td>
          10244
          -
          10368
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)))
        </td>
      </tr><tr>
        <td>
          234
        </td>
        <td>
          1486
        </td>
        <td>
          10399
          -
          10549
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;)), scala.None)
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          1483
        </td>
        <td>
          10497
          -
          10540
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td style="background: #F0ADAD">
          timeseries.responseFormat.getOrElse[String](&quot;none&quot;)
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          1485
        </td>
        <td>
          10544
          -
          10548
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          1482
        </td>
        <td>
          10541
          -
          10542
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          1481
        </td>
        <td>
          10434
          -
          10496
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS Server does not support responseFormat for this request; &quot;
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          1484
        </td>
        <td>
          10432
          -
          10542
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS Server does not support responseFormat for this request; &quot;, &quot;&quot;).s(timeseries.responseFormat.getOrElse[String](&quot;none&quot;))
        </td>
      </tr><tr>
        <td>
          236
        </td>
        <td>
          1492
        </td>
        <td>
          10568
          -
          10616
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          236
        </td>
        <td>
          1488
        </td>
        <td>
          10588
          -
          10606
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          236
        </td>
        <td>
          1491
        </td>
        <td>
          10611
          -
          10615
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          236
        </td>
        <td>
          1490
        </td>
        <td>
          10587
          -
          10587
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          236
        </td>
        <td>
          1487
        </td>
        <td>
          10599
          -
          10599
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          236
        </td>
        <td>
          1489
        </td>
        <td>
          10587
          -
          10587
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          238
        </td>
        <td>
          1497
        </td>
        <td>
          10662
          -
          10748
        </td>
        <td>
          Apply
        </td>
        <td>
          models.sosdata.Wml2Export.getWml2ExportFromSosGetObs
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.wml2Exporter.getWml2ExportFromSosGetObs(response.body, sosCapabilities, sosXmlRequest)
        </td>
      </tr><tr>
        <td>
          238
        </td>
        <td>
          1496
        </td>
        <td>
          10702
          -
          10715
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          239
        </td>
        <td>
          1510
        </td>
        <td>
          10783
          -
          11130
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;);
  val error: models.ErrorResult = models.ErrorResult.apply(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;, scala.Some.apply[String](response.body));
  SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}
        </td>
      </tr><tr>
        <td>
          239
        </td>
        <td>
          1498
        </td>
        <td>
          10769
          -
          10781
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.isEmpty
        </td>
        <td style="background: #F0ADAD">
          wml2.isEmpty
        </td>
      </tr><tr>
        <td>
          240
        </td>
        <td>
          1499
        </td>
        <td>
          10803
          -
          10878
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;)
        </td>
      </tr><tr>
        <td>
          241
        </td>
        <td>
          1503
        </td>
        <td>
          10909
          -
          11045
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(&quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;, scala.Some.apply[String](response.body))
        </td>
      </tr><tr>
        <td>
          242
        </td>
        <td>
          1500
        </td>
        <td>
          10942
          -
          11003
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Couldn\'t extract WML2 from this SOS GetObservation response&quot;
        </td>
      </tr><tr>
        <td>
          243
        </td>
        <td>
          1501
        </td>
        <td>
          11030
          -
          11043
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          243
        </td>
        <td>
          1502
        </td>
        <td>
          11025
          -
          11044
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](response.body)
        </td>
      </tr><tr>
        <td>
          244
        </td>
        <td>
          1509
        </td>
        <td>
          11064
          -
          11112
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          244
        </td>
        <td>
          1506
        </td>
        <td>
          11083
          -
          11083
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          244
        </td>
        <td>
          1508
        </td>
        <td>
          11107
          -
          11111
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          244
        </td>
        <td>
          1505
        </td>
        <td>
          11084
          -
          11102
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          244
        </td>
        <td>
          1504
        </td>
        <td>
          11095
          -
          11095
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          244
        </td>
        <td>
          1507
        </td>
        <td>
          11083
          -
          11083
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          245
        </td>
        <td>
          1524
        </td>
        <td>
          11136
          -
          11780
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  val updatedTime: java.time.OffsetDateTime = java.time.OffsetDateTime.now(java.time.ZoneId.of(SosDataController.this.appTimeZone));
  val fileName: String = &quot;export-&quot;.+(scala.util.Try.apply[String](java.net.URLEncoder.encode(sosCapabilities.title.replace(&quot; &quot;, &quot;_&quot;), &quot;UTF-8&quot;).+(&quot;-&quot;).+(updatedTime.format(SosDataController.this.formatter))).getOrElse[String](&quot;-sosdata&quot;)).+(&quot;.wml&quot;);
  SosDataController.this.Ok.apply[scala.xml.NodeSeq](wml2.get)(http.this.Writeable.writeableOf_NodeSeq[scala.xml.NodeSeq](mvc.this.Codec.utf_8)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Content-disposition&quot;).-&gt;[String](scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName))).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;Content-disposition&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;x-filename&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;x-filename&quot;).-&gt;[String](fileName))
}
        </td>
      </tr><tr>
        <td>
          246
        </td>
        <td>
          1512
        </td>
        <td>
          11174
          -
          11216
        </td>
        <td>
          Apply
        </td>
        <td>
          java.time.OffsetDateTime.now
        </td>
        <td style="background: #F0ADAD">
          java.time.OffsetDateTime.now(java.time.ZoneId.of(SosDataController.this.appTimeZone))
        </td>
      </tr><tr>
        <td>
          246
        </td>
        <td>
          1511
        </td>
        <td>
          11193
          -
          11215
        </td>
        <td>
          Apply
        </td>
        <td>
          java.time.ZoneId.of
        </td>
        <td style="background: #F0ADAD">
          java.time.ZoneId.of(SosDataController.this.appTimeZone)
        </td>
      </tr><tr>
        <td>
          247
        </td>
        <td>
          1513
        </td>
        <td>
          11250
          -
          11405
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.String.+
        </td>
        <td style="background: #F0ADAD">
          &quot;export-&quot;.+(scala.util.Try.apply[String](java.net.URLEncoder.encode(sosCapabilities.title.replace(&quot; &quot;, &quot;_&quot;), &quot;UTF-8&quot;).+(&quot;-&quot;).+(updatedTime.format(SosDataController.this.formatter))).getOrElse[String](&quot;-sosdata&quot;)).+(&quot;.wml&quot;)
        </td>
      </tr><tr>
        <td>
          249
        </td>
        <td>
          1515
        </td>
        <td>
          11427
          -
          11427
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          249
        </td>
        <td>
          1514
        </td>
        <td>
          11428
          -
          11436
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.get
        </td>
        <td style="background: #F0ADAD">
          wml2.get
        </td>
      </tr><tr>
        <td>
          249
        </td>
        <td>
          1516
        </td>
        <td>
          11427
          -
          11427
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_NodeSeq
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_NodeSeq[scala.xml.NodeSeq](mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          250
        </td>
        <td>
          1519
        </td>
        <td>
          11471
          -
          11529
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.ArrowAssoc.-&gt;
        </td>
        <td style="background: #F0ADAD">
          scala.this.Predef.ArrowAssoc[String](&quot;Content-disposition&quot;).-&gt;[String](scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName))
        </td>
      </tr><tr>
        <td>
          250
        </td>
        <td>
          1518
        </td>
        <td>
          11496
          -
          11529
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName)
        </td>
      </tr><tr>
        <td>
          250
        </td>
        <td>
          1517
        </td>
        <td>
          11471
          -
          11492
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-disposition&quot;
        </td>
      </tr><tr>
        <td>
          251
        </td>
        <td>
          1520
        </td>
        <td>
          11564
          -
          11620
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.ArrowAssoc.-&gt;
        </td>
        <td style="background: #F0ADAD">
          scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;Content-disposition&quot;)
        </td>
      </tr><tr>
        <td>
          252
        </td>
        <td>
          1521
        </td>
        <td>
          11655
          -
          11702
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.ArrowAssoc.-&gt;
        </td>
        <td style="background: #F0ADAD">
          scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;x-filename&quot;)
        </td>
      </tr><tr>
        <td>
          253
        </td>
        <td>
          1523
        </td>
        <td>
          11425
          -
          11762
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.withHeaders
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.Ok.apply[scala.xml.NodeSeq](wml2.get)(http.this.Writeable.writeableOf_NodeSeq[scala.xml.NodeSeq](mvc.this.Codec.utf_8)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Content-disposition&quot;).-&gt;[String](scala.StringContext.apply(&quot;attachment; filename=&quot;, &quot;&quot;).s(fileName))).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;Content-disposition&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;Access-Control-Expose-Headers&quot;).-&gt;[String](&quot;x-filename&quot;)).withHeaders(scala.this.Predef.ArrowAssoc[String](&quot;x-filename&quot;).-&gt;[String](fileName))
        </td>
      </tr><tr>
        <td>
          253
        </td>
        <td>
          1522
        </td>
        <td>
          11737
          -
          11761
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.ArrowAssoc.-&gt;
        </td>
        <td style="background: #F0ADAD">
          scala.this.Predef.ArrowAssoc[String](&quot;x-filename&quot;).-&gt;[String](fileName)
        </td>
      </tr><tr>
        <td>
          255
        </td>
        <td>
          1528
        </td>
        <td>
          11841
          -
          11841
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          255
        </td>
        <td>
          1527
        </td>
        <td>
          11841
          -
          11841
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          255
        </td>
        <td>
          1530
        </td>
        <td>
          11822
          -
          11876
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          255
        </td>
        <td>
          1526
        </td>
        <td>
          11842
          -
          11866
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          255
        </td>
        <td>
          1529
        </td>
        <td>
          11871
          -
          11875
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          255
        </td>
        <td>
          1525
        </td>
        <td>
          11853
          -
          11853
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          1536
        </td>
        <td>
          12171
          -
          12761
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;\n       |&lt;sos:GetObservation\n       |    xmlns:sos=\&quot;http://www.opengis.net/sos/2.0\&quot;\n       |    xmlns:fes=\&quot;http://www.opengis.net/fes/2.0\&quot;\n       |    xmlns:gml=\&quot;http://www.opengis.net/gml/3.2\&quot;\n       |    xmlns:swe=\&quot;http://www.opengis.net/swe/2.0\&quot;\n       |    xmlns:xlink=\&quot;http://www.w3.org/1999/xlink\&quot;\n       |    xmlns:swes=\&quot;http://www.opengis.net/swes/2.0\&quot;\n       |    xmlns:xsi=\&quot;http://www.w3.org/2001/XMLSchema-instance\&quot; service=\&quot;SOS\&quot; version=\&quot;2.0.0\&quot; xsi:schemaLocation=\&quot;http://www.opengis.net/sos/2.0 http://schemas.opengis.net/sos/2.0/sos.xsd\&quot;&gt;\n       |\n       |    &lt;sos:procedure&gt;&quot;
        </td>
      </tr><tr>
        <td>
          270
        </td>
        <td>
          1550
        </td>
        <td>
          12167
          -
          13657
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;\n       |&lt;sos:GetObservation\n       |    xmlns:sos=\&quot;http://www.opengis.net/sos/2.0\&quot;\n       |    xmlns:fes=\&quot;http://www.opengis.net/fes/2.0\&quot;\n       |    xmlns:gml=\&quot;http://www.opengis.net/gml/3.2\&quot;\n       |    xmlns:swe=\&quot;http://www.opengis.net/swe/2.0\&quot;\n       |    xmlns:xlink=\&quot;http://www.w3.org/1999/xlink\&quot;\n       |    xmlns:swes=\&quot;http://www.opengis.net/swes/2.0\&quot;\n       |    xmlns:xsi=\&quot;http://www.w3.org/2001/XMLSchema-instance\&quot; service=\&quot;SOS\&quot; version=\&quot;2.0.0\&quot; xsi:schemaLocation=\&quot;http://www.opengis.net/sos/2.0 http://schemas.opengis.net/sos/2.0/sos.xsd\&quot;&gt;\n       |\n       |    &lt;sos:procedure&gt;&quot;, &quot;&lt;/sos:procedure&gt;\n       |\n       |    &lt;sos:offering&gt;&quot;, &quot;&lt;/sos:offering&gt;\n       |\n       |    &lt;sos:observedProperty&gt;&quot;, &quot;&lt;/sos:observedProperty&gt;\n       |\n       |    &lt;sos:temporalFilter&gt;\n       |        &lt;fes:During&gt;\n       |            &lt;fes:ValueReference&gt;phenomenonTime&lt;/fes:ValueReference&gt;\n       |            &lt;gml:TimePeriod gml:id=\&quot;tp_1\&quot;&gt;\n       |                &lt;gml:beginPosition&gt;&quot;, &quot;&lt;/gml:beginPosition&gt;\n       |                &lt;gml:endPosition&gt;&quot;, &quot;&lt;/gml:endPosition&gt;\n       |            &lt;/gml:TimePeriod&gt;\n       |        &lt;/fes:During&gt;\n       |    &lt;/sos:temporalFilter&gt;\n       |\n       |    &lt;sos:featureOfInterest&gt;&quot;, &quot;&lt;/sos:featureOfInterest&gt;\n       |\n       |    &lt;sos:responseFormat&gt;&quot;, &quot;&lt;/sos:responseFormat&gt;\n       |&lt;/sos:GetObservation&gt;\n          &quot;).s(timeseries.procedure, timeseries.offering, timeseries.observedProperty, timeseries.fromDate, timeseries.toDate, timeseries.featureOfInterest, responseFormat)
        </td>
      </tr><tr>
        <td>
          280
        </td>
        <td>
          1544
        </td>
        <td>
          12762
          -
          12782
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.procedure
        </td>
        <td style="background: #F0ADAD">
          timeseries.procedure
        </td>
      </tr><tr>
        <td>
          280
        </td>
        <td>
          1537
        </td>
        <td>
          12783
          -
          12836
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&lt;/sos:procedure&gt;\n       |\n       |    &lt;sos:offering&gt;&quot;
        </td>
      </tr><tr>
        <td>
          282
        </td>
        <td>
          1545
        </td>
        <td>
          12837
          -
          12856
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.offering
        </td>
        <td style="background: #F0ADAD">
          timeseries.offering
        </td>
      </tr><tr>
        <td>
          282
        </td>
        <td>
          1538
        </td>
        <td>
          12857
          -
          12917
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&lt;/sos:offering&gt;\n       |\n       |    &lt;sos:observedProperty&gt;&quot;
        </td>
      </tr><tr>
        <td>
          284
        </td>
        <td>
          1539
        </td>
        <td>
          12946
          -
          13212
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&lt;/sos:observedProperty&gt;\n       |\n       |    &lt;sos:temporalFilter&gt;\n       |        &lt;fes:During&gt;\n       |            &lt;fes:ValueReference&gt;phenomenonTime&lt;/fes:ValueReference&gt;\n       |            &lt;gml:TimePeriod gml:id=\&quot;tp_1\&quot;&gt;\n       |                &lt;gml:beginPosition&gt;&quot;
        </td>
      </tr><tr>
        <td>
          284
        </td>
        <td>
          1546
        </td>
        <td>
          12918
          -
          12945
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.observedProperty
        </td>
        <td style="background: #F0ADAD">
          timeseries.observedProperty
        </td>
      </tr><tr>
        <td>
          290
        </td>
        <td>
          1547
        </td>
        <td>
          13213
          -
          13232
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.fromDate
        </td>
        <td style="background: #F0ADAD">
          timeseries.fromDate
        </td>
      </tr><tr>
        <td>
          290
        </td>
        <td>
          1540
        </td>
        <td>
          13233
          -
          13296
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&lt;/gml:beginPosition&gt;\n       |                &lt;gml:endPosition&gt;&quot;
        </td>
      </tr><tr>
        <td>
          291
        </td>
        <td>
          1548
        </td>
        <td>
          13297
          -
          13314
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.toDate
        </td>
        <td style="background: #F0ADAD">
          timeseries.toDate
        </td>
      </tr><tr>
        <td>
          291
        </td>
        <td>
          1541
        </td>
        <td>
          13315
          -
          13481
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&lt;/gml:endPosition&gt;\n       |            &lt;/gml:TimePeriod&gt;\n       |        &lt;/fes:During&gt;\n       |    &lt;/sos:temporalFilter&gt;\n       |\n       |    &lt;sos:featureOfInterest&gt;&quot;
        </td>
      </tr><tr>
        <td>
          296
        </td>
        <td>
          1542
        </td>
        <td>
          13511
          -
          13578
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&lt;/sos:featureOfInterest&gt;\n       |\n       |    &lt;sos:responseFormat&gt;&quot;
        </td>
      </tr><tr>
        <td>
          296
        </td>
        <td>
          1549
        </td>
        <td>
          13482
          -
          13510
        </td>
        <td>
          Select
        </td>
        <td>
          models.sosdata.Timeseries.featureOfInterest
        </td>
        <td style="background: #F0ADAD">
          timeseries.featureOfInterest
        </td>
      </tr><tr>
        <td>
          298
        </td>
        <td>
          1543
        </td>
        <td>
          13592
          -
          13657
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&lt;/sos:responseFormat&gt;\n       |&lt;/sos:GetObservation&gt;\n          &quot;
        </td>
      </tr><tr>
        <td>
          300
        </td>
        <td>
          1551
        </td>
        <td>
          12167
          -
          13669
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.immutable.StringLike.stripMargin
        </td>
        <td style="background: #F0ADAD">
          scala.this.Predef.augmentString(scala.StringContext.apply(&quot;\n       |&lt;sos:GetObservation\n       |    xmlns:sos=\&quot;http://www.opengis.net/sos/2.0\&quot;\n       |    xmlns:fes=\&quot;http://www.opengis.net/fes/2.0\&quot;\n       |    xmlns:gml=\&quot;http://www.opengis.net/gml/3.2\&quot;\n       |    xmlns:swe=\&quot;http://www.opengis.net/swe/2.0\&quot;\n       |    xmlns:xlink=\&quot;http://www.w3.org/1999/xlink\&quot;\n       |    xmlns:swes=\&quot;http://www.opengis.net/swes/2.0\&quot;\n       |    xmlns:xsi=\&quot;http://www.w3.org/2001/XMLSchema-instance\&quot; service=\&quot;SOS\&quot; version=\&quot;2.0.0\&quot; xsi:schemaLocation=\&quot;http://www.opengis.net/sos/2.0 http://schemas.opengis.net/sos/2.0/sos.xsd\&quot;&gt;\n       |\n       |    &lt;sos:procedure&gt;&quot;, &quot;&lt;/sos:procedure&gt;\n       |\n       |    &lt;sos:offering&gt;&quot;, &quot;&lt;/sos:offering&gt;\n       |\n       |    &lt;sos:observedProperty&gt;&quot;, &quot;&lt;/sos:observedProperty&gt;\n       |\n       |    &lt;sos:temporalFilter&gt;\n       |        &lt;fes:During&gt;\n       |            &lt;fes:ValueReference&gt;phenomenonTime&lt;/fes:ValueReference&gt;\n       |            &lt;gml:TimePeriod gml:id=\&quot;tp_1\&quot;&gt;\n       |                &lt;gml:beginPosition&gt;&quot;, &quot;&lt;/gml:beginPosition&gt;\n       |                &lt;gml:endPosition&gt;&quot;, &quot;&lt;/gml:endPosition&gt;\n       |            &lt;/gml:TimePeriod&gt;\n       |        &lt;/fes:During&gt;\n       |    &lt;/sos:temporalFilter&gt;\n       |\n       |    &lt;sos:featureOfInterest&gt;&quot;, &quot;&lt;/sos:featureOfInterest&gt;\n       |\n       |    &lt;sos:responseFormat&gt;&quot;, &quot;&lt;/sos:responseFormat&gt;\n       |&lt;/sos:GetObservation&gt;\n          &quot;).s(timeseries.procedure, timeseries.offering, timeseries.observedProperty, timeseries.fromDate, timeseries.toDate, timeseries.featureOfInterest, responseFormat)).stripMargin
        </td>
      </tr><tr>
        <td>
          309
        </td>
        <td>
          1581
        </td>
        <td>
          13841
          -
          14560
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.ActionBuilder.async
        </td>
        <td style="background: #F0ADAD">
          play.api.mvc.Action.async(((request: play.api.mvc.Request[play.api.mvc.AnyContent]) =&gt; {
  val responseFuture: scala.concurrent.Future[Either[models.ErrorResult,models.sosdata.SosCapabilities]] = SosDataController.this.retrieveSosCapabilities(sosUrl);
  responseFuture.recover[Object](({
    @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
      def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
        $anonfun.super.&lt;init&gt;();
        ()
      };
      final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x4: A1, default: A1 =&gt; B1): B1 = ((x4.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; {
          SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e);
          val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        }
        case (defaultCase$ @ _) =&gt; default.apply(x4)
      };
      final def isDefinedAt(x4: Throwable): Boolean = ((x4.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
        case (e @ (_: Exception)) =&gt; true
        case (defaultCase$ @ _) =&gt; false
      }
    };
    new $anonfun()
  }: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global);
  responseFuture.map[play.api.mvc.Result](((response: Either[models.ErrorResult,models.sosdata.SosCapabilities]) =&gt; response match {
    case (b: models.sosdata.SosCapabilities)scala.util.Right[models.ErrorResult,models.sosdata.SosCapabilities]((sosCapabilities @ _)) =&gt; SosDataController.this.Ok.apply[play.api.libs.json.JsValue](sosCapabilities.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
    case (a: models.ErrorResult)scala.util.Left[models.ErrorResult,models.sosdata.SosCapabilities]((errorResult @ _)) =&gt; SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
  }))(scala.concurrent.ExecutionContext.Implicits.global)
}))
        </td>
      </tr><tr>
        <td>
          311
        </td>
        <td>
          1552
        </td>
        <td>
          13893
          -
          13924
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.retrieveSosCapabilities
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.retrieveSosCapabilities(sosUrl)
        </td>
      </tr><tr>
        <td>
          314
        </td>
        <td>
          1568
        </td>
        <td>
          13965
          -
          14277
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.recover
        </td>
        <td style="background: #F0ADAD">
          responseFuture.recover[Object](({
  @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,play.api.mvc.Result] with Serializable {
    def &lt;init&gt;(): &lt;$anon: Throwable =&gt; play.api.mvc.Result&gt; = {
      $anonfun.super.&lt;init&gt;();
      ()
    };
    final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: play.api.mvc.Result](x4: A1, default: A1 =&gt; B1): B1 = ((x4.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; {
        SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e);
        val error: models.ErrorResult = models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()));
        SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
      }
      case (defaultCase$ @ _) =&gt; default.apply(x4)
    };
    final def isDefinedAt(x4: Throwable): Boolean = ((x4.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; true
      case (defaultCase$ @ _) =&gt; false
    }
  };
  new $anonfun()
}: PartialFunction[Throwable,play.api.mvc.Result]))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          314
        </td>
        <td>
          1567
        </td>
        <td>
          13988
          -
          13988
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.$anonfun.&lt;init&gt;
        </td>
        <td style="background: #F0ADAD">
          new $anonfun()
        </td>
      </tr><tr>
        <td>
          316
        </td>
        <td>
          1553
        </td>
        <td>
          14025
          -
          14080
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e)
        </td>
      </tr><tr>
        <td>
          317
        </td>
        <td>
          1560
        </td>
        <td>
          14101
          -
          14214
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()))
        </td>
      </tr><tr>
        <td>
          317
        </td>
        <td>
          1554
        </td>
        <td>
          14115
          -
          14127
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Exception (&quot;
        </td>
      </tr><tr>
        <td>
          317
        </td>
        <td>
          1557
        </td>
        <td>
          14113
          -
          14183
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName())
        </td>
      </tr><tr>
        <td>
          317
        </td>
        <td>
          1556
        </td>
        <td>
          14128
          -
          14155
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Class.getCanonicalName
        </td>
        <td style="background: #F0ADAD">
          e.getClass().getCanonicalName()
        </td>
      </tr><tr>
        <td>
          317
        </td>
        <td>
          1555
        </td>
        <td>
          14156
          -
          14183
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;) on SOS get capabilities.&quot;
        </td>
      </tr><tr>
        <td>
          318
        </td>
        <td>
          1559
        </td>
        <td>
          14195
          -
          14213
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](e.getMessage())
        </td>
      </tr><tr>
        <td>
          318
        </td>
        <td>
          1558
        </td>
        <td>
          14200
          -
          14212
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Throwable.getMessage
        </td>
        <td style="background: #F0ADAD">
          e.getMessage()
        </td>
      </tr><tr>
        <td>
          319
        </td>
        <td>
          1563
        </td>
        <td>
          14242
          -
          14242
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          319
        </td>
        <td>
          1566
        </td>
        <td>
          14223
          -
          14271
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          319
        </td>
        <td>
          1562
        </td>
        <td>
          14243
          -
          14261
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](error)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          319
        </td>
        <td>
          1565
        </td>
        <td>
          14266
          -
          14270
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          319
        </td>
        <td>
          1564
        </td>
        <td>
          14242
          -
          14242
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          319
        </td>
        <td>
          1561
        </td>
        <td>
          14254
          -
          14254
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          323
        </td>
        <td>
          1580
        </td>
        <td>
          14319
          -
          14556
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.map
        </td>
        <td style="background: #F0ADAD">
          responseFuture.map[play.api.mvc.Result](((response: Either[models.ErrorResult,models.sosdata.SosCapabilities]) =&gt; response match {
  case (b: models.sosdata.SosCapabilities)scala.util.Right[models.ErrorResult,models.sosdata.SosCapabilities]((sosCapabilities @ _)) =&gt; SosDataController.this.Ok.apply[play.api.libs.json.JsValue](sosCapabilities.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
  case (a: models.ErrorResult)scala.util.Left[models.ErrorResult,models.sosdata.SosCapabilities]((errorResult @ _)) =&gt; SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
}))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          1569
        </td>
        <td>
          14417
          -
          14441
        </td>
        <td>
          Apply
        </td>
        <td>
          models.sosdata.SosCapabilities.toJson
        </td>
        <td style="background: #F0ADAD">
          sosCapabilities.toJson()
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          1572
        </td>
        <td>
          14446
          -
          14450
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          1571
        </td>
        <td>
          14416
          -
          14416
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          1573
        </td>
        <td>
          14414
          -
          14451
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.Ok.apply[play.api.libs.json.JsValue](sosCapabilities.toJson())(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          325
        </td>
        <td>
          1570
        </td>
        <td>
          14416
          -
          14416
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          1578
        </td>
        <td>
          14536
          -
          14540
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.http.ContentTypes.JSON
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.JSON
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          1575
        </td>
        <td>
          14507
          -
          14531
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.json.Json.toJson
        </td>
        <td style="background: #F0ADAD">
          play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes)
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          1574
        </td>
        <td>
          14518
          -
          14518
        </td>
        <td>
          Select
        </td>
        <td>
          models.ErrorResult.writes
        </td>
        <td style="background: #F0ADAD">
          models.this.ErrorResult.writes
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          1577
        </td>
        <td>
          14506
          -
          14506
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.writeableOf_JsValue
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          1576
        </td>
        <td>
          14506
          -
          14506
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          326
        </td>
        <td>
          1579
        </td>
        <td>
          14487
          -
          14541
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.mvc.Result.as
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.InternalServerError.apply[play.api.libs.json.JsValue](play.api.libs.json.Json.toJson[models.ErrorResult](errorResult)(models.this.ErrorResult.writes))(http.this.Writeable.writeableOf_JsValue(mvc.this.Codec.utf_8)).as(SosDataController.this.JSON)
        </td>
      </tr><tr>
        <td>
          339
        </td>
        <td>
          1582
        </td>
        <td>
          14828
          -
          14861
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.ArrowAssoc.-&gt;
        </td>
        <td style="background: #F0ADAD">
          scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)
        </td>
      </tr><tr>
        <td>
          340
        </td>
        <td>
          1584
        </td>
        <td>
          14874
          -
          14874
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.mvc.Codec.utf_8
        </td>
        <td style="background: #F0ADAD">
          mvc.this.Codec.utf_8
        </td>
      </tr><tr>
        <td>
          340
        </td>
        <td>
          1583
        </td>
        <td>
          14875
          -
          14895
        </td>
        <td>
          Select
        </td>
        <td>
          controllers.SosDataController.GET_CAPABILITIES_XML
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.GET_CAPABILITIES_XML
        </td>
      </tr><tr>
        <td>
          340
        </td>
        <td>
          1586
        </td>
        <td>
          14788
          -
          14896
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.libs.ws.WSRequest.post
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.wsClient.url(sosUrl).withHeaders(scala.this.Predef.ArrowAssoc[String](SosDataController.this.CONTENT_TYPE).-&gt;[String](&quot;application/xml&quot;)).post[String](SosDataController.this.GET_CAPABILITIES_XML)(http.this.Writeable.wString(mvc.this.Codec.utf_8))
        </td>
      </tr><tr>
        <td>
          340
        </td>
        <td>
          1585
        </td>
        <td>
          14874
          -
          14874
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          play.api.http.DefaultWriteables.wString
        </td>
        <td style="background: #F0ADAD">
          http.this.Writeable.wString(mvc.this.Codec.utf_8)
        </td>
      </tr><tr>
        <td>
          342
        </td>
        <td>
          1596
        </td>
        <td>
          14925
          -
          14925
        </td>
        <td>
          Apply
        </td>
        <td>
          controllers.SosDataController.$anonfun.&lt;init&gt;
        </td>
        <td style="background: #F0ADAD">
          new $anonfun()
        </td>
      </tr><tr>
        <td>
          342
        </td>
        <td>
          1597
        </td>
        <td>
          14902
          -
          15151
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.recover
        </td>
        <td style="background: #F0ADAD">
          responseFuture.recover[Object](({
  @SerialVersionUID(value = 0) final &lt;synthetic&gt; class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,scala.util.Left[models.ErrorResult,Nothing]] with Serializable {
    def &lt;init&gt;(): &lt;$anon: Throwable =&gt; scala.util.Left[models.ErrorResult,Nothing]&gt; = {
      $anonfun.super.&lt;init&gt;();
      ()
    };
    final override def applyOrElse[A1 &lt;: Throwable, B1 &gt;: scala.util.Left[models.ErrorResult,Nothing]](x5: A1, default: A1 =&gt; B1): B1 = ((x5.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; {
        SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e);
        scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage())))
      }
      case (defaultCase$ @ _) =&gt; default.apply(x5)
    };
    final def isDefinedAt(x5: Throwable): Boolean = ((x5.asInstanceOf[Throwable]: Throwable): Throwable @unchecked) match {
      case (e @ (_: Exception)) =&gt; true
      case (defaultCase$ @ _) =&gt; false
    }
  };
  new $anonfun()
}: PartialFunction[Throwable,scala.util.Left[models.ErrorResult,Nothing]]))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          344
        </td>
        <td>
          1587
        </td>
        <td>
          14962
          -
          15017
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(&quot;Sos get capabilities threw exception&quot;, e)
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          1590
        </td>
        <td>
          15058
          -
          15085
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Class.getCanonicalName
        </td>
        <td style="background: #F0ADAD">
          e.getClass().getCanonicalName()
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          1595
        </td>
        <td>
          15026
          -
          15145
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.util.Left.apply
        </td>
        <td style="background: #F0ADAD">
          scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage())))
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          1589
        </td>
        <td>
          15086
          -
          15113
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;) on SOS get capabilities.&quot;
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          1591
        </td>
        <td>
          15043
          -
          15113
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName())
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          1594
        </td>
        <td>
          15031
          -
          15144
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;Exception (&quot;, &quot;) on SOS get capabilities.&quot;).s(e.getClass().getCanonicalName()), scala.Some.apply[String](e.getMessage()))
        </td>
      </tr><tr>
        <td>
          345
        </td>
        <td>
          1588
        </td>
        <td>
          15045
          -
          15057
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Exception (&quot;
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          1593
        </td>
        <td>
          15125
          -
          15143
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](e.getMessage())
        </td>
      </tr><tr>
        <td>
          346
        </td>
        <td>
          1592
        </td>
        <td>
          15130
          -
          15142
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Throwable.getMessage
        </td>
        <td style="background: #F0ADAD">
          e.getMessage()
        </td>
      </tr><tr>
        <td>
          349
        </td>
        <td>
          1639
        </td>
        <td>
          15157
          -
          15883
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.map
        </td>
        <td style="background: #F0ADAD">
          responseFuture.map[Either[models.ErrorResult,models.sosdata.SosCapabilities]](((response: play.api.libs.ws.WSResponse) =&gt; if (response.status.!=(200))
  {
    SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot;&quot;).s(sosUrl, response.status));
    scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetCapabilities&quot;).s(sosUrl, response.status), scala.Some.apply[String](response.body)))
  }
else
  if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
    {
      SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
      scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body)))
    }
  else
    scala.`package`.Right.apply[Nothing, models.sosdata.SosCapabilities](models.sosdata.SosCapabilities.fromXml(response.xml, sosUrl).get)))(scala.concurrent.ExecutionContext.Implicits.global)
        </td>
      </tr><tr>
        <td>
          350
        </td>
        <td>
          1614
        </td>
        <td>
          15224
          -
          15449
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot;&quot;).s(sosUrl, response.status));
  scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetCapabilities&quot;).s(sosUrl, response.status), scala.Some.apply[String](response.body)))
}
        </td>
      </tr><tr>
        <td>
          350
        </td>
        <td>
          1598
        </td>
        <td>
          15200
          -
          15222
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.!=
        </td>
        <td style="background: #F0ADAD">
          response.status.!=(200)
        </td>
      </tr><tr>
        <td>
          351
        </td>
        <td>
          1599
        </td>
        <td>
          15249
          -
          15262
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Calling SOS &quot;
        </td>
      </tr><tr>
        <td>
          351
        </td>
        <td>
          1602
        </td>
        <td>
          15292
          -
          15307
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.status
        </td>
        <td style="background: #F0ADAD">
          response.status
        </td>
      </tr><tr>
        <td>
          351
        </td>
        <td>
          1601
        </td>
        <td>
          15308
          -
          15309
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          351
        </td>
        <td>
          1604
        </td>
        <td>
          15234
          -
          15310
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot;&quot;).s(sosUrl, response.status))
        </td>
      </tr><tr>
        <td>
          351
        </td>
        <td>
          1600
        </td>
        <td>
          15270
          -
          15291
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; HTTP result status &quot;
        </td>
      </tr><tr>
        <td>
          351
        </td>
        <td>
          1603
        </td>
        <td>
          15247
          -
          15309
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Calling SOS &quot;, &quot; HTTP result status &quot;, &quot;&quot;).s(sosUrl, response.status)
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          1605
        </td>
        <td>
          15338
          -
          15346
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Server &quot;
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          1608
        </td>
        <td>
          15372
          -
          15387
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.status
        </td>
        <td style="background: #F0ADAD">
          response.status
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          1613
        </td>
        <td>
          15319
          -
          15441
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.util.Left.apply
        </td>
        <td style="background: #F0ADAD">
          scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetCapabilities&quot;).s(sosUrl, response.status), scala.Some.apply[String](response.body)))
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          1607
        </td>
        <td>
          15388
          -
          15408
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; on GetCapabilities&quot;
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          1606
        </td>
        <td>
          15354
          -
          15371
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot; responded with &quot;
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          1609
        </td>
        <td>
          15336
          -
          15408
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetCapabilities&quot;).s(sosUrl, response.status)
        </td>
      </tr><tr>
        <td>
          352
        </td>
        <td>
          1612
        </td>
        <td>
          15324
          -
          15440
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;Server &quot;, &quot; responded with &quot;, &quot; on GetCapabilities&quot;).s(sosUrl, response.status), scala.Some.apply[String](response.body))
        </td>
      </tr><tr>
        <td>
          353
        </td>
        <td>
          1611
        </td>
        <td>
          15420
          -
          15439
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](response.body)
        </td>
      </tr><tr>
        <td>
          353
        </td>
        <td>
          1610
        </td>
        <td>
          15425
          -
          15438
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          355
        </td>
        <td>
          1638
        </td>
        <td>
          15461
          -
          15876
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          if (response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!)
  {
    SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
    scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body)))
  }
else
  scala.`package`.Right.apply[Nothing, models.sosdata.SosCapabilities](models.sosdata.SosCapabilities.fromXml(response.xml, sosUrl).get)
        </td>
      </tr><tr>
        <td>
          355
        </td>
        <td>
          1617
        </td>
        <td>
          15465
          -
          15529
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get.contains(&quot;application/xml&quot;).unary_!
        </td>
      </tr><tr>
        <td>
          355
        </td>
        <td>
          1616
        </td>
        <td>
          15511
          -
          15528
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;application/xml&quot;
        </td>
      </tr><tr>
        <td>
          355
        </td>
        <td>
          1633
        </td>
        <td>
          15531
          -
          15790
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get));
  scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body)))
}
        </td>
      </tr><tr>
        <td>
          355
        </td>
        <td>
          1615
        </td>
        <td>
          15482
          -
          15496
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          356
        </td>
        <td>
          1620
        </td>
        <td>
          15617
          -
          15631
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          356
        </td>
        <td>
          1623
        </td>
        <td>
          15541
          -
          15639
        </td>
        <td>
          Apply
        </td>
        <td>
          play.api.LoggerLike.error
        </td>
        <td style="background: #F0ADAD">
          SosDataController.this.logger.error(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get))
        </td>
      </tr><tr>
        <td>
          356
        </td>
        <td>
          1619
        </td>
        <td>
          15637
          -
          15638
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          356
        </td>
        <td>
          1622
        </td>
        <td>
          15554
          -
          15638
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get)
        </td>
      </tr><tr>
        <td>
          356
        </td>
        <td>
          1618
        </td>
        <td>
          15556
          -
          15600
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetCapabilities result was not XML but &quot;
        </td>
      </tr><tr>
        <td>
          356
        </td>
        <td>
          1621
        </td>
        <td>
          15601
          -
          15636
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.get
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get
        </td>
      </tr><tr>
        <td>
          357
        </td>
        <td>
          1632
        </td>
        <td>
          15648
          -
          15782
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.util.Left.apply
        </td>
        <td style="background: #F0ADAD">
          scala.`package`.Left.apply[models.ErrorResult, Nothing](models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body)))
        </td>
      </tr><tr>
        <td>
          357
        </td>
        <td>
          1626
        </td>
        <td>
          15728
          -
          15742
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;Content-Type&quot;
        </td>
      </tr><tr>
        <td>
          357
        </td>
        <td>
          1628
        </td>
        <td>
          15665
          -
          15749
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get)
        </td>
      </tr><tr>
        <td>
          357
        </td>
        <td>
          1631
        </td>
        <td>
          15653
          -
          15781
        </td>
        <td>
          Apply
        </td>
        <td>
          models.ErrorResult.apply
        </td>
        <td style="background: #F0ADAD">
          models.ErrorResult.apply(scala.StringContext.apply(&quot;SOS GetCapabilities result was not XML but &quot;, &quot;&quot;).s(response.header(&quot;Content-Type&quot;).get), scala.Some.apply[String](response.body))
        </td>
      </tr><tr>
        <td>
          357
        </td>
        <td>
          1625
        </td>
        <td>
          15748
          -
          15749
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;&quot;
        </td>
      </tr><tr>
        <td>
          357
        </td>
        <td>
          1624
        </td>
        <td>
          15667
          -
          15711
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;SOS GetCapabilities result was not XML but &quot;
        </td>
      </tr><tr>
        <td>
          357
        </td>
        <td>
          1627
        </td>
        <td>
          15712
          -
          15747
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.get
        </td>
        <td style="background: #F0ADAD">
          response.header(&quot;Content-Type&quot;).get
        </td>
      </tr><tr>
        <td>
          358
        </td>
        <td>
          1629
        </td>
        <td>
          15766
          -
          15779
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.body
        </td>
        <td style="background: #F0ADAD">
          response.body
        </td>
      </tr><tr>
        <td>
          358
        </td>
        <td>
          1630
        </td>
        <td>
          15761
          -
          15780
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[String](response.body)
        </td>
      </tr><tr>
        <td>
          361
        </td>
        <td>
          1635
        </td>
        <td>
          15818
          -
          15867
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Option.get
        </td>
        <td style="background: #F0ADAD">
          models.sosdata.SosCapabilities.fromXml(response.xml, sosUrl).get
        </td>
      </tr><tr>
        <td>
          361
        </td>
        <td>
          1634
        </td>
        <td>
          15842
          -
          15854
        </td>
        <td>
          Select
        </td>
        <td>
          play.api.libs.ws.WSResponse.xml
        </td>
        <td style="background: #F0ADAD">
          response.xml
        </td>
      </tr><tr>
        <td>
          361
        </td>
        <td>
          1637
        </td>
        <td>
          15812
          -
          15868
        </td>
        <td>
          Block
        </td>
        <td>
          scala.util.Right.apply
        </td>
        <td style="background: #F0ADAD">
          scala.`package`.Right.apply[Nothing, models.sosdata.SosCapabilities](models.sosdata.SosCapabilities.fromXml(response.xml, sosUrl).get)
        </td>
      </tr><tr>
        <td>
          361
        </td>
        <td>
          1636
        </td>
        <td>
          15812
          -
          15868
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.util.Right.apply
        </td>
        <td style="background: #F0ADAD">
          scala.`package`.Right.apply[Nothing, models.sosdata.SosCapabilities](models.sosdata.SosCapabilities.fromXml(response.xml, sosUrl).get)
        </td>
      </tr>
    </table>
          </div>
        </div>
      </body>
    </html>